[{"/Users/browsing/GitHub/indent-system/indent-system/src/index.js":"1","/Users/browsing/GitHub/indent-system/indent-system/src/reportWebVitals.js":"2"},{"size":12006,"mtime":1608196633795,"results":"3","hashOfConfig":"4"},{"size":362,"mtime":1608177340500,"results":"5","hashOfConfig":"4"},{"filePath":"6","messages":"7","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"8"},"9kz5co",{"filePath":"9","messages":"10","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"11"},"/Users/browsing/GitHub/indent-system/indent-system/src/index.js",["12","13","14","15","16","17","18","19","20","21"],"import * as React from 'react'\nimport * as ReactDOM from 'react-dom'\n\nimport socketIOClient from \"socket.io-client\";\n\nvar serverURL = \"http://127.0.0.1:4001\"\n\nvar setTabs\nvar additionalTabs = []\nvar tabID = 0\nconst addTab = (tab) => {\n  additionalTabs = [...additionalTabs]\n  additionalTabs.push(tab)\n  setTabs(additionalTabs)\n}\nconst removeTab = (id) => {\n  additionalTabs = [...additionalTabs].filter(x => x[0] !== id)\n  detailPersistentStore[id] = undefined\n  setTabs(additionalTabs)\n}\n\nvar socket\n\nconst App = () => {\n  \n  var [tabs, mySetTabs] = React.useState([])\n  setTabs = mySetTabs\n  React.useEffect(() => {\n    socket = socketIOClient(serverURL);\n    socket.on(\"sendIndents\", (indents, writeToken) => {\n      if (writeToken !== undefined) {\n        if (writeToken < ackWriteToken) {\n          return\n        }\n        ackWriteToken = writeToken\n        if (pendingWrites[writeToken] !== undefined) {\n          pendingWrites[writeToken]()\n        }\n      }\n      dataStore = [...indents]\n      notifyNewData()\n    })\n    socket.on(\"sendNotifications\", (notifications) => {\n      notificationsStore = [...notifications]\n      notifyNewN()\n    })\n    socket.emit(\"requestIndents\", \"\")\n    socket.emit(\"requestNotifications\", \"\")\n    return () => {\n      socket.disconnect()\n    }\n  })\n\n  return (\n    <Tabs>\n      {[(<div label=\"view indents\" key=\"defaultTab1\" mykey=\"defaultTab1\">\n        <TransportView/>\n      </div>),\n      (<div label=\"new indent\" key=\"defaultTab2\" mykey=\"defaultTab2\">\n        <NewIndentView/>\n      </div>),\n      (<div label=\"notifications\" key=\"defaultTab3\" mykey=\"defaultTab3\">\n        <NotificationsPanel/>\n      </div>),\n      (<div label=\"dev\" key=\"defaultTab4\" mykey=\"defaultTab4\">\n        <DevPanel/>\n      </div>), ...tabs.map(v => (<DetailGenerator mykey={v[0]} label={readDataStore(v[1]).name} removable=\"true\" removeCallback={() => removeTab(v[0])} details={v} key={v[0]} />))]}\n    </Tabs>\n  );\n}\n\nconst DevPanel = () => {\n  const [myServerURL, setServerURL] = React.useState(serverURL)\n  const [response, setResponse] = React.useState(\"\");\n\n  React.useEffect(() => {\n    const myListener = data => {\n      setResponse(data)\n    }\n    socket.on(\"FromAPI\", myListener);\n    socket.emit(\"ToAPI\", \"Hello!\")\n    return () => {\n      socket.emit(\"ToAPI\", \"Goodbye!\")\n      socket.off(\"FromAPI\", myListener)\n    }\n  }, []);\n\n  return (<div>\n    <div>Server URL</div><textarea value={myServerURL} onChange={(event) => {\n      serverURL = event.target.value\n      setServerURL(serverURL)\n    }}/>\n    <div>It's {response}</div>\n  </div>)\n}\n\nconst NotificationsPanel = () => {\n  var myData = readNotifications()\n  const [data, setData] = React.useState(myData)\n  var callbackID\n  React.useEffect(() => {\n    callbackID = registerNotify(setData)\n    return () => deregisterNotify(callbackID)\n  })\n  var newData = []\n  const encountered = {}\n  for (var i = myData.length-1; i > -1; i--) {\n    if (encountered[myData[i].internalUID] === true) {\n      newData.unshift({...myData[i], latest: false})\n    }\n    else {\n      newData.unshift({...myData[i], latest: true})\n    }\n    encountered[myData[i].internalUID] = true\n  }\n  return (<ListFactory data={newData} generator={(x, index) => notificationItemGenerator(x, x.internalUID, \"\"+x.internalUID+index)} style={TransportViewStyle}/>)\n}\n\nconst detailPersistentStore = {}\n\nconst DetailGenerator = ({details}) => {\n  const [id, index] = details\n  if (detailPersistentStore[id] === undefined) {\n    detailPersistentStore[id] = readDataStore(index)\n  }\n  const [data, setData] = React.useState(detailPersistentStore[id])\n  return (\n  <div>\n  <div onClick={() => removeTab(id)}>\n  {\"Start: \"+data.startDateTime+\" End: \"+data.endDateTime+\" Origin: \"+data.origin+\" Destination: \"+data.destination+\" POC: \"+data.POC+\" POC Number: \"+data.POCPhone}\n  </div>\n  <select value={data.status} onChange={(event) => {\n    detailPersistentStore[id] = {...detailPersistentStore[id], status: event.target.value}\n    setData(detailPersistentStore[id])\n  }}>\n  {statuses.map((val, index) => (<option key={index} value={val}>{val}</option>))}\n  </select>\n  <div onClick={() => {editData(index, detailPersistentStore[id])}}>Save</div>\n  </div>\n  )\n}\n\nconst editData = async (index, newData) => {\n  const refresh = await writeDataStore(index, newData)\n  if (refresh) {\n    notifyNewData()\n  }\n}\n\nconst readDataStore = (internalUID) => {\n  const result = dataStore.filter(x => x.internalUID === internalUID)\n  if (result.length === 0) {\n    return undefined\n  }\n  else {\n    return result[0]\n  }\n}\n\nvar ackWriteToken = 0\nvar currWriteToken = 0\nvar pendingWrites = []\n\n\nconst writeDataStore = async (internalUID, write) => {\n  currWriteToken++\n  var resolve\n  const myPromise = new Promise(v => resolve=v)\n  pendingWrites[currWriteToken] = resolve\n  socket.emit(\"writeDataStore\", [internalUID, write, currWriteToken])\n  console.log(\"hi\")\n  await myPromise\n  if (currWriteToken == ackWriteToken) {\n    return true\n  }\n  else {\n    return false\n  }\n}\n\nconst mockNotificationSystem = ({internalUID, status}, {internalUID: oldUID, status: oldStatus}) => {\n  if (status !== oldStatus && internalUID === oldUID) {\n    appendNotifications({title: readDataStore(internalUID).name+\" is now \"+status, internalUID: internalUID})\n    notifyNewN()\n  }\n}\n\nconst appendDataStore = async (write) => {\n  currWriteToken++\n  var resolve\n  const myPromise = new Promise(v => resolve=v)\n  pendingWrites[currWriteToken] = resolve\n  socket.emit(\"appendDataStore\", [write, currWriteToken])\n  await myPromise\n  if (currWriteToken == ackWriteToken) {\n    return true\n  }\n  else {\n    return false\n  }\n}\n\nconst readRange = () => {\n  return dataStore\n}\n\nconst sleep = async (x) => {\n  return new Promise(resolve => setTimeout(resolve, x))\n}\n\nconst loadDataStore = async () => {\n  await sleep(fakeServerDelay)\n}\n\nconst fakeServerDelay = 1000\n\nconst submitForm = async (data) => {\n  const refresh = await appendDataStore(data)\n  if (refresh) {\n    notifyNewData()\n  }\n}\n\nconst FormFactory = ({fields, defaults}) => {\n  var fieldStates = []\n  const [states, setStates] = React.useState(fields.map(x => x.initialData))\n  var myStates = states\n  for (var index = 0; index < fields.length; index++) {\n    const i = index\n    const field = fields[i]\n    fieldStates.push([states[i], x => {\n      myStates= [...myStates]\n      myStates[i] = x\n      setStates(myStates)\n    },field.initialData, field.name, field.friendlyName])\n  }\n  const initializeFields = () => {\n    setStates(fields.map(x => x.initialData))\n  }\n  const submit = () => {\n    var constitutedObject = {}\n    for (const {name, initialData} of defaults) {\n      constitutedObject[name] = initialData\n    }\n    for (const [text, setText, initialData, fieldName] of fieldStates) {\n      constitutedObject[fieldName] = text\n    }\n    submitForm(constitutedObject)\n    initializeFields()\n  }\n  return (\n  <div>\n  <div>\n  {fieldStates.map(([text, setText, initialData, fieldName, friendlyName], index) => {\n    return (\n      <div style={formItemStyle} key={index}>\n      <div>{friendlyName}</div>\n      <textarea value={text} onChange={(event) => setText(event.target.value)}/>\n      </div>\n    )\n  })}\n  </div>\n  <div style={{backgroundColor: \"gray\", borderRadius: \"10px\", display: \"inline-block\", padding: \"5px\"}} onClick={submit}>submit</div>\n  </div>\n  )\n}\n\nconst formItemStyle = {\n  display: \"flex\",\n  justifyContent: \"center\"\n}\n\nconst NewIndentView = () => {\n  return (<div style={TransportViewStyle}><FormFactory fields={formFields} defaults={dataDefaults}/></div>)\n}\n\nconst TransportView = () => {\n  const [data, setData] = React.useState(readRange())\n  var callbackID\n  React.useEffect(() => {\n    callbackID = registerCallback(setData)\n    return () => deregisterCallback(callbackID)\n  })\n  return (<ListFactory data={data} generator={x => transportItemGenerator(x, x.internalUID)} style={TransportViewStyle}/>)\n}\n\nconst TransportViewStyle = {\n  font: \"20px Arial, sans-serif\"\n}\n\nconst transportItemGenerator = (data, index) => {\n  return (\n    <div key={data.internalUID} onClick={() => addDetailTab(data, index)}>{\"Title: \"+data.name+\" Start: \"+data.startDateTime+\" End: \"+data.endDateTime+\" Origin: \"+data.origin+\" Destination: \"+data.destination+\" POC: \"+data.POC+\" POC Number: \"+data.POCPhone+\" Status: \"+data.status}</div>\n  )\n}\n\nconst notificationItemGenerator = (data, index, key) => {\n  return (\n    <div key={key} style={notificationItemStyle(data.latest)} onClick={() => addDetailTab(data, index)}>{data.title}</div>\n  )\n}\n\nconst notificationItemStyle = (latest) => {\n  if (latest === false) {\n    return {\n      color: \"grey\"\n    }\n  }\n  else {\n    return {}\n  }\n}\n\nconst addDetailTab = (data, index) => {\n  addTab([tabID, index])\n  tabID++\n}\n\nconst ListFactory = ({data, generator, style, header, tail}) => {\n  return (\n    <div style={style}>\n    {header}\n    {data.map(generator)}\n    {tail}\n    </div>\n  )\n}\n\nconst getCallbackSystem = (dataSource) => {\n\n  const registeredCallbacks = []\n\n  const registerCallback = (callback) => {\n    return registeredCallbacks.push(callback)-1\n  }\n\n  const deregisterCallback = (id) => {\n    if (id > -1 && id < registeredCallbacks.length) {\n      registeredCallbacks[id] = ()=>{}\n    }\n  }\n  \n  const notifyNewData = () => {\n    for (const callback of registeredCallbacks) {\n      callback(dataSource())\n    }\n  }\n\n  return [registerCallback, deregisterCallback, notifyNewData]\n}\n\nvar dataStore = []\n\nconst readNotifications = () => {\n  return notificationsStore\n}\n\nconst appendNotifications = (write) => {\n  notificationsStore = [...notificationsStore, write]\n}\n\nvar notificationsStore = []\n\nconst statuses = [\"Pending\", \"Submitted\", \"Recommended\"]\n\nconst formFields = [{name: \"name\", initialData: \"\", friendlyName: \"Indent title\"}, {name: \"startDateTime\", initialData: \"\", friendlyName: \"Start time\"}, {name: \"endDateTime\", initialData: \"\", friendlyName: \"End time\"}, {name: \"origin\", initialData: \"\", friendlyName: \"Origin\"}, {name: \"destination\", initialData: \"\", friendlyName: \"Destination\"}, {name: \"POC\", initialData: \"\", friendlyName: \"Contact person\"}, {name: \"POCPhone\", initialData: \"\", friendlyName: \"Contact person number\"}]\n\nconst dataDefaults = [{name: \"status\", initialData: \"Pending\", friendlyName: \"Status\"}]\n\nconst Tabs = ({children}) => {\n  const [selTab, setSelTab] = React.useState(0);\n  return (\n    <div>\n      <div style={TabsStyle}>\n        {children.map((child, index) => {\n          const obj = {...child.props, onClick: () => {setSelTab(index)}, active: index === Math.min(selTab, children.length-1), key: child.props.mykey}\n          return (<Tab {...obj}></Tab>)\n        })}\n      </div>\n      <div>\n        {children[Math.min(selTab, children.length-1)]}\n      </div>\n    </div>\n  )\n}\n\nconst TabsStyle = {\n  display: \"flex\",\n  flexDirection: \"row\",\n  backgroundColor: \"rgb(240,240,240)\",\n  overflow: \"auto\",\n  whiteSpace: \"nowrap\"\n}\n\nconst Tab = ({label, onClick, active, removable, removeCallback}) => {\n  return (\n    <span style={TabWrapperStyle}>\n      <span style={TabStyle(active)}>\n        <span onClick={onClick}>\n        &nbsp;{label}&nbsp;\n        </span>\n        {removable ? (<span style={TabCloseStyle} onClick={removeCallback}>{\"‚ùå\"}&nbsp;</span>) : undefined}\n      </span>\n    </span>\n  )\n}\n\nconst TabWrapperStyle = {\n  padding: \"10px 20px 0px 10px\",\n}\n\nconst TabCloseStyle = {\n  font: \"16px Arial, sans-serif\"\n}\n\nconst TabStyle = (active) => {\n  return {\n    transition: \"all 0.25s\",\n    font: \"25px Arial, sans-serif\",\n    backgroundColor: active?\"rgb(225,225,225)\":\"rgb(150,150,150)\",\n    backgroundClip: \"padding-box\",\n    borderRadius: \"15px 15px 0px 0px\",\n    display: \"flex\",\n    flexDirection: \"row\"\n  }\n}\n\nconst [registerCallback, deregisterCallback, notifyNewData] = getCallbackSystem(readRange)\n\nconst [registerNotify, deregisterNotify, notifyNewN] = getCallbackSystem(readNotifications)\n\nReactDOM.render(\n  <div style={{textAlign: \"center\"}}>\n    <App/>\n  </div>,\n  document.getElementById('root')\n);\n","/Users/browsing/GitHub/indent-system/indent-system/src/reportWebVitals.js",[],["22","23"],{"ruleId":"24","severity":1,"message":"25","line":99,"column":10,"nodeType":"26","messageId":"27","endLine":99,"endColumn":14},{"ruleId":"28","severity":1,"message":"29","line":102,"column":18,"nodeType":"30","endLine":102,"endColumn":41},{"ruleId":"31","severity":1,"message":"32","line":173,"column":22,"nodeType":"33","messageId":"34","endLine":173,"endColumn":24},{"ruleId":"24","severity":1,"message":"35","line":181,"column":7,"nodeType":"26","messageId":"27","endLine":181,"endColumn":29},{"ruleId":"31","severity":1,"message":"32","line":195,"column":22,"nodeType":"33","messageId":"34","endLine":195,"endColumn":24},{"ruleId":"24","severity":1,"message":"36","line":211,"column":7,"nodeType":"26","messageId":"27","endLine":211,"endColumn":20},{"ruleId":"37","severity":1,"message":"38","line":231,"column":34,"nodeType":"39","messageId":"40","endLine":235,"endColumn":6},{"ruleId":"24","severity":1,"message":"41","line":245,"column":23,"nodeType":"26","messageId":"27","endLine":245,"endColumn":30},{"ruleId":"24","severity":1,"message":"42","line":245,"column":32,"nodeType":"26","messageId":"27","endLine":245,"endColumn":43},{"ruleId":"28","severity":1,"message":"29","line":281,"column":18,"nodeType":"30","endLine":281,"endColumn":43},{"ruleId":"43","replacedBy":"44"},{"ruleId":"45","replacedBy":"46"},"no-unused-vars","'data' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","Assignments to the 'callbackID' variable from inside React Hook React.useEffect will be lost after each render. To preserve the value over time, store it in a useRef Hook and keep the mutable value in the '.current' property. Otherwise, you can move this variable directly inside React.useEffect.","CallExpression","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'mockNotificationSystem' is assigned a value but never used.","'loadDataStore' is assigned a value but never used.","no-loop-func","Function declared in a loop contains unsafe references to variable(s) 'myStates', 'myStates', 'myStates', 'myStates'.","ArrowFunctionExpression","unsafeRefs","'setText' is assigned a value but never used.","'initialData' is assigned a value but never used.","no-native-reassign",["47"],"no-negated-in-lhs",["48"],"no-global-assign","no-unsafe-negation"]