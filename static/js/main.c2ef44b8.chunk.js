(this["webpackJsonpindent-system"]=this["webpackJsonpindent-system"]||[]).push([[0],{133:function(e,t,n){"use strict";n.r(t);var a,i,r=n(56),c=n(25),s=n.n(c),l=n(49),u=n(18),j=n(3),o=n(15),d=n(31),b=n(0),f=n(9),h=n(81),O=n.n(h),x=n(134),m=n(168),v=n(169),p=n(170),y=n(181),g=n(173),D=n(183),k=n(174),C=n(175),T=n(176),S=n(177),w=n(178),P=n(182),N=n(179),I=n(180),U=n.p+"static/media/logo.58ed9303.jpg",q=n.p+"static/media/5sirlogo.a6ac04db.jpg",E="https://murmuring-ocean-38436.herokuapp.com/",M=[],R=0,W=function(){var e=b.useState([]),t=Object(o.a)(e,2),n=t[0],r=t[1];a=r,b.useEffect((function(){return(i=O()(E,{secure:!0})).on("sendIndents",(function(e,t){if(void 0!==t){if(t<B)return;B=t,void 0!==F[t]&&F[t]()}je=Object(d.a)(e).reverse(),De()})),i.on("sendNotifications",(function(e){de=Object(d.a)(e).reverse(),we()})),i.emit("requestIndents",""),i.emit("requestNotifications",""),function(){i.disconnect()}}),[]);var c=b.useState(0),s=Object(o.a)(c,2),l=s[0],u=s[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)(xe,{selTab:l,setSelTab:u,children:[Object(j.jsx)("div",{label:"view indents",mykey:"defaultTab1",children:Object(j.jsx)(te,{setSelTab:u})},"defaultTab1"),Object(j.jsx)("div",{label:"new indent",mykey:"defaultTab2",children:Object(j.jsx)(ee,{})},"defaultTab2"),Object(j.jsx)("div",{label:"notifications",mykey:"defaultTab3",children:Object(j.jsx)(A,{setSelTab:u})},"defaultTab3")].concat(Object(d.a)(n.map((function(e,t){return Object(j.jsx)(L,{mykey:e[0],label:z(e[1]).name,removable:"true",removeCallback:function(t,n){var i;i=e[0],M=Object(d.a)(M).filter((function(e){return e[0]!==i})),J[i]=void 0,a(M);var r=Math.min(l,n-1);r>t&&u(r-1)},details:e},e[0])}))))}),Object(j.jsx)("div",{style:{height:"6px"}}),Object(j.jsx)("img",{src:q,width:"192px"})]})},A=function(e){var t=e.setSelTab,n=oe(),a=b.useState(n),i=Object(o.a)(a,2),r=(i[0],i[1]);b.useEffect((function(){var e=Te(r);return function(){return Se(e)}}),[]);for(var c=[],s={},l=0;l<n.length;l++)!0===s[n[l].internalUID]?c.push(Object(u.a)(Object(u.a)({},n[l]),{},{latest:!1})):c.push(Object(u.a)(Object(u.a)({},n[l]),{},{latest:!0})),s[n[l].internalUID]=!0;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{style:{height:"6px"}}),Object(j.jsx)(x.a,{square:!0,children:Object(j.jsx)(le,{data:c,generator:function(e,n){return re(e,e.internalUID,""+e.internalUID+n,t)},style:ne})})]})},J={},L=function(e){var t=e.details,n=Object(o.a)(t,2),a=n[0],i=n[1];void 0===J[a]&&(J[a]=z(i));var r=b.useState(J[a]),c=Object(o.a)(r,2),s=c[0],l=c[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{style:{height:"6px"}}),Object(j.jsx)(x.a,{square:!0,children:Object(j.jsx)(le,{header:Object(j.jsx)(m.a,{children:Object(j.jsx)(v.a,{children:fe.map((function(e,t){return Object(j.jsx)(p.a,{children:e.friendlyName},t)}))})}),data:[s],generator:function(e){return ie(e,e.internalUID)},style:ne})}),Object(j.jsx)("div",{style:{height:"6px"}}),Object(j.jsx)(y.a,{variant:"outlined",native:!0,value:s.status,onChange:function(e){J[a]=Object(u.a)(Object(u.a)({},J[a]),{},{status:e.target.value}),l(J[a])},children:be.map((function(e,t){return Object(j.jsx)("option",{value:e,children:e},t)}))}),Object(j.jsx)(g.a,{variant:"outlined",onClick:function(){V(i,J[a])},children:"Save"})]})},V=function(){var e=Object(l.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t,n);case 2:e.sent&&De();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(e){var t=je.filter((function(t){return t.internalUID===e}));return 0===t.length?void 0:t[0]},B=0,H=0,F=[],G=function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H++,r=new Promise((function(e){return a=e})),F[H]=a,i.emit("writeDataStore",[t,n,H]),e.next=6,r;case 6:if(H!==B){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H++,a=new Promise((function(e){return n=e})),F[H]=n,i.emit("appendDataStore",[t,H]),e.next=6,a;case 6:if(H!==B){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){return je},X=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t);case 2:e.sent&&De();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){var t=e.fields,n=e.defaults,a=e.formPersistentStore,i=[],c=void 0===a?{}:a;void 0===c.data&&(c.data=t.map((function(e){return e.initialData})));for(var s=b.useState(c.data),l=Object(o.a)(s,2),u=l[0],f=l[1],h=u,O=function(){var e=x,n=t[e];i.push([u[e],function(t){(h=Object(d.a)(h))[e]=t,c.data=h,f(h)},n.initialData,n.name,n.friendlyName,n.fieldType])},x=0;x<t.length;x++)O();return Object(j.jsxs)("form",{noValidate:!0,children:[Object(j.jsx)("div",{children:i.map((function(e,t){var n=Object(o.a)(e,6),a=n[0],i=n[1],r=(n[2],n[3],n[4]),c=n[5];return Object(j.jsx)("div",{style:$,children:"datetime"===c?Object(j.jsx)(D.a,{id:"datetime-local",fullWidth:!0,label:r,type:"datetime-local",variant:"outlined",onChange:function(e){return i(e.target.value)},InputLabelProps:{shrink:!0}}):Object(j.jsx)(D.a,{fullWidth:!0,multiline:!0,label:r,variant:"outlined",value:a,onChange:function(e){return i(e.target.value)},InputLabelProps:{shrink:!0}})},t)}))}),Object(j.jsx)(g.a,{variant:"outlined",onClick:function(){var e,a={},s=Object(r.a)(n);try{for(s.s();!(e=s.n()).done;){var l=e.value,u=l.name,j=l.initialData;a[u]=j}}catch(p){s.e(p)}finally{s.f()}var d,b=Object(r.a)(i);try{for(b.s();!(d=b.n()).done;){var h=Object(o.a)(d.value,6),O=h[0],x=(h[1],h[2],h[3]),m=(h[4],h[5]),v=Z[m];a[x]=v?v(O):O}}catch(p){b.e(p)}finally{b.f()}X(a),function(){var e=t.map((function(e){return e.initialData}));c.data=e,f(e)}()},children:"submit"})]})},Z={datetime:function(e){try{if(e.length>0)return e.slice(8,10)+"/"+e.slice(5,7)+"/"+e.slice(0,4)+" "+e.slice(11,16)}catch(t){}return e}},$={display:"flex",justifyContent:"center",padding:"5px"},_={},ee=function(){return Object(j.jsxs)("div",{style:ne,children:[Object(j.jsx)("div",{style:{height:"6px"}}),Object(j.jsx)(Y,{fields:fe,defaults:he,formPersistentStore:_})]})},te=function(e){var t=e.setSelTab,n=b.useState(Q()),a=Object(o.a)(n,2),i=a[0],r=a[1];return b.useEffect((function(){var e=ye(r);return function(){return ge(e)}}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{style:{height:"6px"}}),Object(j.jsx)(x.a,{square:!0,children:Object(j.jsx)(le,{header:Object(j.jsx)(m.a,{children:Object(j.jsx)(v.a,{children:Oe.map((function(e,t){return Object(j.jsx)(p.a,{children:e.friendlyName},t)}))})}),data:i,generator:function(e){return ae(e,e.internalUID,t)},style:ne})})]})},ne={font:"20px Arial, sans-serif"},ae=function(e,t,n){return Object(j.jsxs)(v.a,{onClick:function(){se(e,t),n(1/0)},children:[Object(j.jsx)(p.a,{children:e.name}),Object(j.jsx)(p.a,{children:e.startDateTime}),Object(j.jsx)(p.a,{children:e.endDateTime}),Object(j.jsx)(p.a,{children:e.origin}),Object(j.jsx)(p.a,{children:e.destination}),Object(j.jsx)(p.a,{children:e.POC}),Object(j.jsx)(p.a,{children:e.POCPhone}),Object(j.jsx)(p.a,{children:e.vehicles}),Object(j.jsx)(p.a,{children:e.notes}),Object(j.jsx)(p.a,{children:e.status})]},e.internalUID)},ie=function(e,t){return Object(j.jsxs)(v.a,{children:[Object(j.jsx)(p.a,{children:e.name}),Object(j.jsx)(p.a,{children:e.startDateTime}),Object(j.jsx)(p.a,{children:e.endDateTime}),Object(j.jsx)(p.a,{children:e.origin}),Object(j.jsx)(p.a,{children:e.destination}),Object(j.jsx)(p.a,{children:e.POC}),Object(j.jsx)(p.a,{children:e.POCPhone}),Object(j.jsx)(p.a,{children:e.vehicles}),Object(j.jsx)(p.a,{children:e.notes})]},e.internalUID)},re=function(e,t,n,a){return Object(j.jsx)(v.a,{onClick:function(){se(e,t),a(1/0)},children:Object(j.jsx)(p.a,{style:ce(e.latest),align:"center",children:e.title})},n)},ce=function(e){return!1===e?{color:"grey"}:{}},se=function(e,t){var n;n=[R,t],(M=Object(d.a)(M)).push(n),a(M),R++},le=function(e){var t=e.data,n=e.generator,a=(e.style,e.header),i=e.tail;return Object(j.jsx)(k.a,{children:Object(j.jsxs)(C.a,{children:[a,Object(j.jsx)(T.a,{children:t.map(n)}),i]})})},ue=function(e){var t=[];return[function(e){return t.push(e)-1},function(e){e>-1&&e<t.length&&(t[e]=function(){})},function(){var n,a=Object(r.a)(t);try{for(a.s();!(n=a.n()).done;){(0,n.value)(e())}}catch(i){a.e(i)}finally{a.f()}}]},je=[],oe=function(){return de},de=[],be=["Pending","Submitted","Recommended"],fe=[{name:"name",initialData:"",friendlyName:"Purpose"},{name:"startDateTime",initialData:"",friendlyName:"Start time",fieldType:"datetime"},{name:"endDateTime",initialData:"",friendlyName:"End time",fieldType:"datetime"},{name:"origin",initialData:"",friendlyName:"Reporting location"},{name:"destination",initialData:"",friendlyName:"Destination"},{name:"POC",initialData:"",friendlyName:"Contact person"},{name:"POCPhone",initialData:"",friendlyName:"Contact person number"},{name:"vehicles",initialData:"",friendlyName:"Vehicles"},{name:"notes",initialData:"",friendlyName:"Notes"}],he=[{name:"status",initialData:"Pending",friendlyName:"Status"}],Oe=[].concat(fe,he),xe=function(e){var t=e.children,n=e.selTab,a=e.setSelTab,i=[Object(j.jsx)(S.a,{style:{opacity:1,minWidth:0,minHeight:0,padding:0},disableRipple:!0,selected:!0,label:Object(j.jsx)("div",{style:{height:"48px",width:"48px"},children:Object(j.jsx)("img",{src:U,height:"48px",width:"48px"})})})];return Object(j.jsxs)("div",{children:[Object(j.jsx)(w.a,{position:"static",children:Object(j.jsx)(P.a,{variant:"scrollable",value:Math.min(n,t.length-1)+i.length,children:[].concat(i,Object(d.a)(t.map((function(e,i){var r=Object(u.a)(Object(u.a)({},e.props),{},{removeCallback:function(){return e.props.removeCallback(i,t.length)},onClick:function(){a(i)},active:i===Math.min(n,t.length-1),key:e.props.mykey});return Object(j.jsx)(me,Object(u.a)({},r))}))))})}),Object(j.jsx)("div",{children:t[Math.min(n,t.length-1)]})]})},me=function(e){var t=e.label,n=e.onClick,a=e.active,i=e.removable,r=e.removeCallback;return Object(j.jsx)(S.a,{style:{padding:0},disableRipple:!0,selected:!0,label:Object(j.jsxs)("span",{children:[Object(j.jsx)(S.a,{label:t,onClick:n,selected:!!a||null}),i?Object(j.jsx)(N.a,{size:"small",onClick:r,children:Object(j.jsx)(I.a,{style:{fill:"red"}})}):void 0]})})},ve=ue(Q),pe=Object(o.a)(ve,3),ye=pe[0],ge=pe[1],De=pe[2],ke=ue(oe),Ce=Object(o.a)(ke,3),Te=Ce[0],Se=Ce[1],we=Ce[2];f.render(Object(j.jsx)("div",{style:{textAlign:"center"},children:Object(j.jsx)(W,{})}),document.getElementById("root"))}},[[133,1,2]]]);
//# sourceMappingURL=main.c2ef44b8.chunk.js.map