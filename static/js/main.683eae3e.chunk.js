(this["webpackJsonpindent-system"]=this["webpackJsonpindent-system"]||[]).push([[0],{203:function(e,t){e.exports={makeRanker:function(e){var t=0,n={},r=[];return function(a){a=a.trim().toLowerCase().split(/\b\s+/);t||(!function(e,t,n){for(var r=0;r<e.length;r++){for(var a=Object.values(e[r]).map((function(e){return e.toString().trim().toLowerCase().split(/\b\s+/)})).flat(),i={},c=0;c<a.length;c++)i[a[c]]||(n[a[c]]||(n[a[c]]=0),n[a[c]]++,i[a[c]]=0),i[a[c]]+=1/a.length;t.push(i)}var s=Object.keys(n);for(r=0;r<s.length;r++)n[s[r]]?n[s[r]]=Math.log(e.length/n[s[r]]):n[s[r]]=0}(e,r,n),t=1);for(var i=[],c=0;c<e.length;c++)i.push([0,0,c,e[c]]);for(c=0;c<a.length;c++)for(var s=a[c],l=0;l<e.length;l++)r[l][s]&&(i[l][0]-=r[l][s]*n[s],i[l][1]-=r[l][s]);return i=i.sort((function(e,t){for(var n=0;e[n]===t[n];)n++;return e[n]-t[n]})).map((function(e){return e[3]}))}}}},205:function(e,t,n){"use strict";n.r(t);var r,a,i=n(31),c=n.n(i),s=n(63),l=n(23),u=n(3),o=n(64),d=n(15),j=n(39),f=n(0),b=n(10),h=n(122),v=n.n(h),O=n(93),x=n(231),p=n(242),m=n(233),g=n(244),y=n(234),k=n(235),D=n(236),C=n(237),w=n(238),T=n(239),P=n(240),S=n(243),R=n(116),N=n(241),I=n(123),E=n.n(I),U=n.p+"static/media/logo.58ed9303.jpg",L=n.p+"static/media/5sirlogo.a6ac04db.jpg",H=n(203),M="https://murmuring-ocean-38436.herokuapp.com/",q=[],W=0,B=function(){var e=f.useState([]),t=Object(d.a)(e,2),n=t[0],i=t[1];r=i,f.useEffect((function(){return(a=v()(M,{secure:!0})).on("sendIndents",(function(e,t){if(void 0!==t){if(t<F)return;F=t,void 0!==K[t]&&K[t]()}he=Object(j.a)(e).reverse(),Pe()})),a.on("sendNotifications",(function(e){Oe=Object(j.a)(e).reverse(),Ee()})),a.emit("requestIndents",""),a.emit("requestNotifications",""),function(){a.disconnect()}}),[]);var c=f.useState(0),s=Object(d.a)(c,2),l=s[0],b=s[1],h=f.useRef(null),O=f.useRef([]),x=f.useRef(0);return f.useEffect((function(){if(h.current){x.current=h.current.offsetHeight;var e,t=Object(o.a)(O.current);try{for(t.s();!(e=t.n()).done;){(0,e.value)(h.current.offsetHeight)}}catch(n){t.e(n)}finally{t.f()}}}),[h]),Object(u.jsxs)("div",{children:[Object(u.jsx)(ye,{selTab:l,setSelTab:b,appbarRef:h,children:[Object(u.jsx)("div",{label:"view indents",mykey:"defaultTab1",children:Object(u.jsx)(ie,{setSelTab:b,heightProvider:[x,O]})},"defaultTab1"),Object(u.jsx)("div",{label:"new indent",mykey:"defaultTab2",children:Object(u.jsx)(re,{})},"defaultTab2"),Object(u.jsx)("div",{label:"notifications",mykey:"defaultTab3",children:Object(u.jsx)(A,{setSelTab:b})},"defaultTab3")].concat(Object(j.a)(n.map((function(e,t){return Object(u.jsx)(V,{mykey:e[0],label:z(e[1]).name,removable:"true",removeCallback:function(t,n){var a;a=e[0],q=Object(j.a)(q).filter((function(e){return e[0]!==a})),J[a]=void 0,r(q);var i=Math.min(l,n-1);i>t&&b(i-1)},details:e,heightProvider:[x,O]},e[0])}))))}),Object(u.jsx)("div",{style:{height:"12px"}}),Object(u.jsx)("img",{src:L,width:"192px"})]})},A=function(e){var t=e.setSelTab,n=ve(),r=f.useState(n),a=Object(d.a)(r,2),i=(a[0],a[1]);f.useEffect((function(){var e=Ne(i);return function(){return Ie(e)}}),[]);for(var c=[],s={},o=0;o<n.length;o++)!0===s[n[o].internalUID]?c.push(Object(l.a)(Object(l.a)({},n[o]),{},{latest:!1})):c.push(Object(l.a)(Object(l.a)({},n[o]),{},{latest:!0})),s[n[o].internalUID]=!0;return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{height:"12px"}}),Object(u.jsx)(O.a,{square:!0,children:Object(u.jsx)(fe,{data:c,generator:function(e,n){return oe(e,e.internalUID,""+e.internalUID+n,t)},style:se})})]})},J={},V=function(e){var t=e.details,n=e.heightProvider,r=Object(d.a)(t,2),a=r[0],i=r[1];void 0===J[a]&&(J[a]=z(i));var c=f.useState(J[a]),s=Object(d.a)(c,2),o=s[0],j=s[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{height:"12px"}}),Object(u.jsx)(O.a,{square:!0,children:Object(u.jsx)(fe,{header:Object(u.jsx)(ce,{heightProvider:n,children:pe.map((function(e,t){return Object(u.jsx)(x.a,{children:e.friendlyName},t)}))}),data:[o],generator:function(e){return ue(e,e.internalUID)},style:se})}),Object(u.jsx)("div",{style:{height:"12px"}}),Object(u.jsx)(p.a,{variant:"outlined",native:!0,value:o.status,onChange:function(e){J[a]=Object(l.a)(Object(l.a)({},J[a]),{},{status:e.target.value}),j(J[a])},children:xe.map((function(e,t){return Object(u.jsx)("option",{value:e,children:e},t)}))}),Object(u.jsx)(m.a,{variant:"outlined",onClick:function(){Y(i,J[a])},children:"Save"})]})},Y=function(){var e=Object(s.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t,n);case 2:e.sent&&Pe();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(e){var t=he.filter((function(t){return t.internalUID===e}));return 0===t.length?void 0:t[0]},F=0,G=0,K=[],Q=function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G++,i=new Promise((function(e){return r=e})),K[G]=r,a.emit("writeDataStore",[t,n,G]),e.next=6,i;case 6:if(G!==F){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G++,r=new Promise((function(e){return n=e})),K[G]=n,a.emit("appendDataStore",[t,G]),e.next=6,r;case 6:if(G!==F){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){return he},$=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t);case 2:e.sent&&Pe();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e){var t=e.fields,n=e.defaults,r=e.formPersistentStore,a=[],i=void 0===r?{}:r;void 0===i.data&&(i.data=t.map((function(e){return e.initialData})));for(var c=f.useState(i.data),s=Object(d.a)(c,2),l=s[0],b=s[1],h=l,v=function(){var e=O,n=t[e];a.push([l[e],function(t){(h=Object(j.a)(h))[e]=t,i.data=h,b(h)},n.initialData,n.name,n.friendlyName,n.fieldType])},O=0;O<t.length;O++)v();return Object(u.jsxs)("form",{noValidate:!0,children:[Object(u.jsx)("div",{children:a.map((function(e,t){var n=Object(d.a)(e,6),r=n[0],a=n[1],i=(n[2],n[3],n[4]),c=n[5];return Object(u.jsx)("div",{style:te,children:"datetime"===c?Object(u.jsx)(g.a,{id:"datetime-local",fullWidth:!0,label:i,type:"datetime-local",variant:"outlined",onChange:function(e){return a(e.target.value)},InputLabelProps:{shrink:!0},style:{maxWidth:"1000px"}}):Object(u.jsx)(g.a,{fullWidth:!0,multiline:!0,label:i,variant:"outlined",value:r,onChange:function(e){return a(e.target.value)},InputLabelProps:{shrink:!0},style:{maxWidth:"1000px"}})},t)}))}),Object(u.jsx)(m.a,{variant:"outlined",onClick:function(){var e,r={},c=Object(o.a)(n);try{for(c.s();!(e=c.n()).done;){var s=e.value,l=s.name,u=s.initialData;r[l]=u}}catch(m){c.e(m)}finally{c.f()}var j,f=Object(o.a)(a);try{for(f.s();!(j=f.n()).done;){var h=Object(d.a)(j.value,6),v=h[0],O=(h[1],h[2],h[3]),x=(h[4],h[5]),p=ee[x];r[O]=p?p(v):v}}catch(m){f.e(m)}finally{f.f()}$(r),function(){var e=t.map((function(e){return e.initialData}));i.data=e,b(e)}()},children:"submit"})]})},ee={datetime:function(e){try{if(e.length>0)return e.slice(8,10)+"/"+e.slice(5,7)+"/"+e.slice(0,4)+" "+e.slice(11,16)}catch(t){}return e}},te={display:"flex",justifyContent:"center",paddingLeft:"12px",paddingRight:"12px",paddingTop:"5px",paddingBottom:"7px"},ne={},re=function(){return Object(u.jsxs)("div",{style:se,children:[Object(u.jsx)("div",{style:{height:"12px"}}),Object(u.jsx)(_,{fields:pe,defaults:me,formPersistentStore:ne})]})},ae={},ie=function(e){var t=e.setSelTab,n=e.heightProvider,r=Z();f.useEffect((function(){var e=we((function(e){o.current=e,b.current=H.makeRanker(e),g(""!==h.current?b.current(h.current):e)}));return function(){return Te(e)}}),[]);var a=f.useState(ae.data),i=Object(d.a)(a,2),c=i[0],s=i[1],l=f.useRef(null),o=f.useRef(r),j=H.makeRanker(r),b=f.useRef(j);void 0===ae.data&&(ae.data="");var h=f.useRef(ae.data),v=f.useState(""!==ae.data?j(ae.data):r),p=Object(d.a)(v,2),m=p[0],g=p[1],y=function(e){s(e),null!==l.current&&(clearTimeout(l.current),l.current=null),l.current=setTimeout((function(){h.current=e,ae.data=e,g(""!==e?b.current(e):o.current),l.current=null}),100)},k=f.useRef(null),D=f.useMemo((function(){return m.filter((function(e){return"Hidden"!==e.status}))}),[m]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{height:"12px"}}),Object(u.jsx)("div",{style:{marginLeft:"12px",marginRight:"12px"},children:Object(u.jsx)(E.a,{ref:k,value:c,onChange:y,onCancelSearch:function(){return y("")},onRequestSearch:function(){return k.current.focus()},style:{margin:"auto",maxWidth:"1000px"}})}),Object(u.jsx)("div",{style:{height:"12px"}}),Object(u.jsx)(O.a,{square:!0,children:Object(u.jsx)(fe,{header:Object(u.jsx)(ce,{heightProvider:n,children:ge.map((function(e,t){return Object(u.jsx)(x.a,{children:e.friendlyName},t)}))}),data:D,generator:function(e){return le(e,e.internalUID,t)},style:se})})]})},ce=function(e){var t=e.children,n=Object(d.a)(e.heightProvider,2),r=n[0],a=n[1],i=f.useRef(null);f.useEffect((function(){var e=r.current,t=i.current.getBoundingClientRect().top+window.scrollY,n=function(){var n=Math.max(e-t+window.scrollY,0);o(n-i.current.offsetHeight)};n();var c=a.current.push((function(t){e=t,n()}))-1;return window.addEventListener("scroll",n),function(){a.current[c]=function(){},window.removeEventListener("scroll",n)}}),[]);var c=f.useState(0),s=Object(d.a)(c,2),l=s[0],o=s[1];return Object(u.jsx)(y.a,{children:Object(u.jsx)(k.a,{ref:i,style:{pointerEvents:"none",transform:"translate(0,"+l+"px)"},children:t})})},se={font:"20px Arial, sans-serif"},le=function(e,t,n){return Object(u.jsxs)(k.a,{onClick:function(){je(e,t),n(1/0)},children:[Object(u.jsx)(x.a,{children:e.name}),Object(u.jsx)(x.a,{children:e.startDateTime}),Object(u.jsx)(x.a,{children:e.endDateTime}),Object(u.jsx)(x.a,{children:e.origin}),Object(u.jsx)(x.a,{children:e.destination}),Object(u.jsx)(x.a,{children:e.POC}),Object(u.jsx)(x.a,{children:e.POCPhone}),Object(u.jsx)(x.a,{children:e.vehicles}),Object(u.jsx)(x.a,{children:e.notes}),Object(u.jsx)(x.a,{children:e.status})]},e.internalUID)},ue=function(e,t){return Object(u.jsxs)(k.a,{children:[Object(u.jsx)(x.a,{children:e.name}),Object(u.jsx)(x.a,{children:e.startDateTime}),Object(u.jsx)(x.a,{children:e.endDateTime}),Object(u.jsx)(x.a,{children:e.origin}),Object(u.jsx)(x.a,{children:e.destination}),Object(u.jsx)(x.a,{children:e.POC}),Object(u.jsx)(x.a,{children:e.POCPhone}),Object(u.jsx)(x.a,{children:e.vehicles}),Object(u.jsx)(x.a,{children:e.notes})]},e.internalUID)},oe=function(e,t,n,r){return Object(u.jsx)(k.a,{onClick:function(){je(e,t),r(1/0)},children:Object(u.jsx)(x.a,{style:de(e.latest),align:"center",children:e.title})},n)},de=function(e){return!1===e?{color:"grey"}:{}},je=function(e,t){var n;n=[W,t],(q=Object(j.a)(q)).push(n),r(q),W++},fe=function(e){var t=e.data,n=e.generator,r=(e.style,e.header),a=e.tail;return Object(u.jsx)(D.a,{children:Object(u.jsxs)(C.a,{stickyHeader:!0,children:[r,Object(u.jsx)(w.a,{children:t.map(n)}),a]})})},be=function(e){var t=[];return[function(e){return t.push(e)-1},function(e){e>-1&&e<t.length&&(t[e]=function(){})},function(){var n,r=Object(o.a)(t);try{for(r.s();!(n=r.n()).done;){(0,n.value)(e())}}catch(a){r.e(a)}finally{r.f()}}]},he=[],ve=function(){return Oe},Oe=[],xe=["Pending","Submitted","Recommended","Hidden"],pe=[{name:"name",initialData:"",friendlyName:"Purpose"},{name:"startDateTime",initialData:"",friendlyName:"Start time",fieldType:"datetime"},{name:"endDateTime",initialData:"",friendlyName:"End time",fieldType:"datetime"},{name:"origin",initialData:"",friendlyName:"Reporting location"},{name:"destination",initialData:"",friendlyName:"Destination"},{name:"POC",initialData:"",friendlyName:"Contact person"},{name:"POCPhone",initialData:"",friendlyName:"Contact person number"},{name:"vehicles",initialData:"",friendlyName:"Vehicles"},{name:"notes",initialData:"",friendlyName:"Notes"}],me=[{name:"status",initialData:"Pending",friendlyName:"Status"}],ge=[].concat(pe,me),ye=function(e){var t=e.children,n=e.selTab,r=e.setSelTab,a=e.appbarRef,i=[Object(u.jsx)(T.a,{style:{opacity:1,minWidth:0,minHeight:0,padding:0},disableRipple:!0,selected:!0,label:Object(u.jsx)("div",{style:{height:"48px",width:"48px"},children:Object(u.jsx)("img",{src:U,height:"48px",width:"48px"})})})];return Object(u.jsxs)("div",{children:[Object(u.jsx)(P.a,{position:"sticky",style:{top:"env(safe-area-inset-top)"},ref:a,children:Object(u.jsx)(S.a,{variant:"scrollable",value:Math.min(n,t.length-1)+i.length,children:[].concat(i,Object(j.a)(t.map((function(e,a){var i=Object(l.a)(Object(l.a)({},e.props),{},{removeCallback:function(){return e.props.removeCallback(a,t.length)},onClick:function(){r(a)},active:a===Math.min(n,t.length-1),key:e.props.mykey});return Object(u.jsx)(ke,Object(l.a)({},i))}))))})}),Object(u.jsx)("div",{children:t[Math.min(n,t.length-1)]})]})},ke=function(e){var t=e.label,n=e.onClick,r=e.active,a=e.removable,i=e.removeCallback;return Object(u.jsx)(T.a,{style:{padding:0},disableRipple:!0,selected:!0,label:Object(u.jsxs)("span",{children:[Object(u.jsx)(T.a,{label:t,onClick:n,selected:!!r||null}),a?Object(u.jsx)(R.a,{size:"small",onClick:i,children:Object(u.jsx)(N.a,{style:{fill:"red"}})}):void 0]})})},De=be(Z),Ce=Object(d.a)(De,3),we=Ce[0],Te=Ce[1],Pe=Ce[2],Se=be(ve),Re=Object(d.a)(Se,3),Ne=Re[0],Ie=Re[1],Ee=Re[2];b.render(Object(u.jsx)("div",{style:{textAlign:"center"},children:Object(u.jsx)(B,{})}),document.getElementById("root"))}},[[205,1,2]]]);
//# sourceMappingURL=main.683eae3e.chunk.js.map