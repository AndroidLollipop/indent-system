(this["webpackJsonpindent-system"]=this["webpackJsonpindent-system"]||[]).push([[0],{259:function(e,t){e.exports={makeRanker:function(e){var t=0,n={},a=[];return function(r){r=r.trim().toLowerCase().split(/\b\s+/);t||(!function(e,t,n){for(var a=0;a<e.length;a++){for(var r=Object.values(e[a]).map((function(e){return e.toString().trim().toLowerCase().split(/\b\s+/)})).flat(),i={},c=0;c<r.length;c++)i[r[c]]||(n[r[c]]||(n[r[c]]=0),n[r[c]]++,i[r[c]]=0),i[r[c]]+=1/r.length;t.push(i)}var s=Object.keys(n);for(a=0;a<s.length;a++)n[s[a]]?n[s[a]]=Math.log(e.length/n[s[a]]):n[s[a]]=0}(e,a,n),t=1);for(var i=[],c=0;c<e.length;c++)i.push([0,0,c,e[c]]);for(c=0;c<r.length;c++)for(var s=r[c],l=0;l<e.length;l++)a[l][s]&&(i[l][0]-=a[l][s]*n[s],i[l][1]-=a[l][s]);return i=i.sort((function(e,t){for(var n=0;e[n]===t[n];)n++;return e[n]-t[n]})).map((function(e){return e[3]}))}}}},261:function(e,t,n){"use strict";n.r(t);var a,r,i=n(176),c=n(55),s=n.n(c),l=n(87),u=n(38),o=n(10),d=n(88),j=n(19),f=n(56),b=n(0),h=n(18),O=n(163),v=n.n(O),p=n(125),m=n(307),x=n(315),g=n(308),y=n(318),D=n(321),k=n(309),C=n(304),w=n(312),S=n(305),T=n(306),P=n(311),R=n(313),I=n(316),N=n(159),U=n(314),M=n(164),E=n.n(M),L=n.p+"static/media/logo.58ed9303.jpg",q=n.p+"static/media/5sirlogo.a6ac04db.jpg",H=n(23),W=n(67),A=n(174),z=n.n(A),B=n(175),J=n.n(B),V=n(259),Y="https://murmuring-ocean-38436.herokuapp.com/",F=[],G=0,K=function(){var e=b.useState([]),t=Object(j.a)(e,2),n=t[0],i=t[1];a=i,b.useEffect((function(){return(r=v()(Y,{secure:!0})).on("sendIndents",(function(e,t){if(void 0!==t){if(t<ee)return;ee=t,void 0!==ne[t]&&ne[t]()}ke=Object(f.a)(e).reverse(),qe()})),r.on("sendNotifications",(function(e){we=Object(f.a)(e).reverse(),Be()})),r.emit("requestIndents",""),r.emit("requestNotifications",""),function(){r.disconnect()}}),[]);var c=b.useState(0),s=Object(j.a)(c,2),l=s[0],u=s[1],h=b.useRef(null),O=b.useRef([]),p=b.useRef(0);return b.useEffect((function(){if(h.current){p.current=h.current.offsetHeight;var e,t=Object(d.a)(O.current);try{for(t.s();!(e=t.n()).done;){(0,e.value)(h.current.offsetHeight)}}catch(n){t.e(n)}finally{t.f()}}}),[h]),Object(o.jsxs)("div",{children:[Object(o.jsx)(Ie,{selTab:l,setSelTab:u,appbarRef:h,children:[Object(o.jsx)("div",{label:"view indents",mykey:"defaultTab1",children:Object(o.jsx)(be,{setSelTab:u,heightProvider:[p,O]})},"defaultTab1"),Object(o.jsx)("div",{label:"new indent",mykey:"defaultTab2",children:Object(o.jsx)(de,{})},"defaultTab2"),Object(o.jsx)("div",{label:"notifications",mykey:"defaultTab3",children:Object(o.jsx)(Q,{setSelTab:u})},"defaultTab3")].concat(Object(f.a)(n.map((function(e,t){return Object(o.jsx)(Z,{mykey:e[0],label:_(e[1]).name,removable:"true",removeCallback:function(t,n){var r;r=e[0],F=Object(f.a)(F).filter((function(e){return e[0]!==r})),X[r]=void 0,a(F);var i=Math.min(l,n-1);i>t&&u(i-1)},details:e,heightProvider:[p,O]},e[0])}))))}),Object(o.jsx)("div",{style:{height:"12px"}}),Object(o.jsx)("img",{src:q,width:"192px"})]})},Q=function(e){var t=e.setSelTab,n=Ce(),a=b.useState(n),r=Object(j.a)(a,2),i=(r[0],r[1]);b.useEffect((function(){var e=Ae(i);return function(){return ze(e)}}),[]);for(var c=[],s={},l=0;l<n.length;l++)!0===s[n[l].internalUID]?c.push(Object(u.a)(Object(u.a)({},n[l]),{},{latest:!1})):c.push(Object(u.a)(Object(u.a)({},n[l]),{},{latest:!0})),s[n[l].internalUID]=!0;return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{style:{height:"12px"}}),Object(o.jsx)(p.a,{square:!0,children:Object(o.jsx)(ye,{data:c,generator:function(e,n){return me(e,e.internalUID,""+e.internalUID+n,t)},style:Oe})})]})},X={},Z=function(e){var t=e.details,n=e.heightProvider,a=Object(j.a)(t,2),r=a[0],i=a[1];void 0===X[r]&&(X[r]=_(i));var c=b.useState(X[r]),s=Object(j.a)(c,2),l=s[0],d=s[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{style:{height:"12px"}}),Object(o.jsx)(p.a,{square:!0,children:Object(o.jsx)(ye,{header:Object(o.jsx)(he,{heightProvider:n,children:Te.map((function(e,t){return Object(o.jsx)(m.a,{children:e.friendlyName},t)}))}),data:[l],generator:function(e){return pe(e,e.internalUID)},style:Oe})}),Object(o.jsx)("div",{style:{height:"12px"}}),Object(o.jsx)(x.a,{variant:"outlined",native:!0,value:l.status,onChange:function(e){X[r]=Object(u.a)(Object(u.a)({},X[r]),{},{status:e.target.value}),d(X[r])},children:Se.map((function(e,t){return Object(o.jsx)("option",{value:e,children:e},t)}))}),Object(o.jsx)(g.a,{variant:"outlined",onClick:function(){$(i,X[r])},children:"Save"})]})},$=function(){var e=Object(l.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(t,n);case 2:e.sent&&qe();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(e){var t=ke.filter((function(t){return t.internalUID===e}));return 0===t.length?void 0:t[0]},ee=0,te=0,ne=[],ae=function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te++,i=new Promise((function(e){return a=e})),ne[te]=a,r.emit("writeDataStore",[t,n,te]),e.next=6,i;case 6:if(te!==ee){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),re=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te++,a=new Promise((function(e){return n=e})),ne[te]=n,r.emit("appendDataStore",[t,te]),e.next=6,a;case 6:if(te!==ee){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){return ke},ce=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t);case 2:e.sent&&qe();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(e){var t=e.fields,n=e.defaults,a=e.formPersistentStore,r=[],i=void 0===a?{}:a;void 0===i.data&&(i.data=t.map((function(e){return e.initialData})));for(var c=b.useState(i.data),s=Object(j.a)(c,2),l=s[0],u=s[1],h=l,O=function(){var e=v,n=t[e];r.push([l[e],function(t){(h=Object(f.a)(h))[e]=t,i.data=h,u(h)},n.initialData,n.name,n.friendlyName,n.fieldType])},v=0;v<t.length;v++)O();return Object(o.jsxs)("form",{noValidate:!0,children:[Object(o.jsx)("div",{children:r.map((function(e,t){var n=Object(j.a)(e,6),a=n[0],r=n[1],i=(n[2],n[3],n[4]),c=n[5];return Object(o.jsx)("div",{style:ue,children:"datetime"===c?Object(o.jsx)(y.a,{id:"datetime-local",fullWidth:!0,label:i,type:"datetime-local",variant:"outlined",onChange:function(e){return r(e.target.value)},InputLabelProps:{shrink:!0},style:{maxWidth:"1000px"}}):Object(o.jsx)(y.a,{fullWidth:!0,multiline:!0,label:i,variant:"outlined",value:a,onChange:function(e){return r(e.target.value)},InputLabelProps:{shrink:!0},style:{maxWidth:"1000px"}})},t)}))}),Object(o.jsx)(g.a,{variant:"outlined",onClick:function(){var e,a={},c=Object(d.a)(n);try{for(c.s();!(e=c.n()).done;){var s=e.value,l=s.name,o=s.initialData;a[l]=o}}catch(x){c.e(x)}finally{c.f()}var f,b=Object(d.a)(r);try{for(b.s();!(f=b.n()).done;){var h=Object(j.a)(f.value,6),O=h[0],v=(h[1],h[2],h[3]),p=(h[4],h[5]),m=le[p];a[v]=m?m(O):O}}catch(x){b.e(x)}finally{b.f()}ce(a),function(){var e=t.map((function(e){return e.initialData}));i.data=e,u(e)}()},children:"submit"})]})},le={datetime:function(e){try{if(e.length>0)return e.slice(8,10)+"/"+e.slice(5,7)+"/"+e.slice(0,4)+" "+e.slice(11,16)}catch(t){}return e}},ue={display:"flex",justifyContent:"center",paddingLeft:"12px",paddingRight:"12px",paddingTop:"5px",paddingBottom:"7px"},oe={},de=function(){return Object(o.jsxs)("div",{style:Oe,children:[Object(o.jsx)("div",{style:{height:"12px"}}),Object(o.jsx)(se,{fields:Te,defaults:Pe,formPersistentStore:oe})]})},je={},fe=function(e){var t=e.children,n=Object(i.a)(e,["children"]);return Object(o.jsx)(W.a.Appointment,Object(u.a)(Object(u.a)({},n),{},{onClick:function(e){return ge(void 0,e.data.internalUID)},children:t}))},be=function(e){var t=e.setSelTab,n=e.heightProvider;!0!==je.initialized&&(je.initialized=!0,je.data="",je.sort=null,je.up=!0,je.view="list",je.selDate=(new Date).toISOString().slice(0,10));var a=ie();b.useEffect((function(){var e=Ee((function(e){u.current=e,h.current=V.makeRanker(e),y(""!==O.current?h.current(O.current):e)}));return function(){return Le(e)}}),[]);var r=b.useState(je.data),i=Object(j.a)(r,2),c=i[0],s=i[1],l=b.useRef(null),u=b.useRef(a),d=V.makeRanker(a),h=b.useRef(d),O=b.useRef(je.data),v=b.useState(""!==je.data?d(je.data):a),x=Object(j.a)(v,2),g=x[0],y=x[1],k=function(e){je.data=e,s(e),je.view="list",F("list"),je.sort=null,P(null),je.up=!0,U(!0),null!==l.current&&(clearTimeout(l.current),l.current=null),l.current=setTimeout((function(){O.current=e,y(""!==e?h.current(e):u.current),l.current=null}),100)},C=b.useRef(null),w=b.useState(je.sort),S=Object(j.a)(w,2),T=S[0],P=S[1],R=b.useState(je.up),I=Object(j.a)(R,2),N=I[0],U=I[1],M=b.useMemo((function(){return g.filter((function(e){return"Hidden"!==e.status}))}),[g]),L=b.useMemo((function(){return null===T?M:M.map((function(e,t){return[e,t]})).sort((function(e,t){var n=Object(j.a)(e,2),a=n[0],r=n[1],i=Object(j.a)(t,2),c=i[0],s=i[1],l=a[T],u=c[T];if(typeof l===typeof u&&l!==u){if("string"===typeof l){for(var o=0;o<Math.min(l.length,u.length);o++){var d=l.charCodeAt(o),f=u.charCodeAt(o);if(d!==f)return d-f}return l.length-u.length}if("number"===typeof l)return l-u}return r-s})).map((function(e){var t=Object(j.a)(e,2),n=t[0];t[1];return n}))}),[M,T]),q=b.useMemo((function(){return!0===N?L:Object(f.a)(L).reverse()}),[L,N]),A=b.useState(je.view),B=Object(j.a)(A,2),Y=B[0],F=B[1],G=b.useState(je.selDate),K=Object(j.a)(G,2),Q=K[0],X=K[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{style:{height:"12px"}}),Object(o.jsx)("div",{style:{marginLeft:"12px",marginRight:"12px"},children:Object(o.jsx)(E.a,{ref:C,value:c,onChange:k,onCancelSearch:function(){return k("")},onRequestSearch:function(){"list"===Y?(je.view="calendar",F("calendar")):(je.view="list",F("list"))},style:{margin:"auto",maxWidth:"1000px"},searchIcon:"list"===Y?Object(o.jsx)(z.a,{}):Object(o.jsx)(J.a,{})})}),Object(o.jsx)("div",{style:{height:"12px"}}),Object(o.jsx)(p.a,{square:!0,children:"list"===Y?Object(o.jsx)(ye,{header:Object(o.jsx)(he,{heightProvider:n,children:Re.map((function(e,t){return Object(o.jsx)(m.a,{children:Object(o.jsx)(D.a,{active:T===e.name,direction:T===e.name&&!1===N?"desc":"asc",onClick:function(){return function(e){je.data="",s("");var t=e===T?!1===N&&(je.sort=null,P(null),!0):(je.sort=e,P(e),!0);je.up=t,U(t)}(e.name)},children:e.friendlyName})},t)}))}),data:q,generator:function(e){return ve(e,e.internalUID,t)},style:Oe}):Object(o.jsxs)(W.d,{data:M.map((function(e){var t=function(e){return e.slice(6,10)+"-"+e.slice(3,5)+"-"+e.slice(0,2)+"T"+e.slice(11,16)};return{startDate:t(e.startDateTime),endDate:t(e.endDateTime),title:e.name,internalUID:e.internalUID}})),children:[Object(o.jsx)(H.q,{defaultCurrentDate:Q,onCurrentDateChange:function(e){je.selDate=e,X(e)}}),Object(o.jsx)(W.c,{}),Object(o.jsx)(W.a,{appointmentComponent:fe}),Object(o.jsx)(W.e,{}),Object(o.jsx)(W.b,{})]})})]})},he=function(e){var t=e.children,n=Object(j.a)(e.heightProvider,2),a=n[0],r=n[1],i=b.useRef(null);b.useEffect((function(){var e=r.current,t=a.current,n=i.current.getBoundingClientRect().top+window.scrollY,c=function(){var e=Math.max(window.scrollY+t-n,0);u(e)};c();var s=e.push((function(e){t=e,c()}))-1;return window.addEventListener("scroll",c),function(){e[s]=function(){},window.removeEventListener("scroll",c)}}),[a,r]);var c=b.useState(0),s=Object(j.a)(c,2),l=s[0],u=s[1];return Object(o.jsx)(k.a,{children:Object(o.jsx)(C.a,{ref:i,style:{transform:"translate(0,"+l+"px)"},children:t})})},Oe={font:"20px Arial, sans-serif"},ve=function(e,t,n){return Object(o.jsxs)(C.a,{onClick:function(){ge(e,t),n(1/0)},children:[Object(o.jsx)(m.a,{children:e.name}),Object(o.jsx)(m.a,{children:e.startDateTime}),Object(o.jsx)(m.a,{children:e.endDateTime}),Object(o.jsx)(m.a,{children:e.origin}),Object(o.jsx)(m.a,{children:e.destination}),Object(o.jsx)(m.a,{children:e.POC}),Object(o.jsx)(m.a,{children:e.POCPhone}),Object(o.jsx)(m.a,{children:e.vehicles}),Object(o.jsx)(m.a,{children:e.notes}),Object(o.jsx)(m.a,{children:e.status})]},e.internalUID)},pe=function(e,t){return Object(o.jsxs)(C.a,{children:[Object(o.jsx)(m.a,{children:e.name}),Object(o.jsx)(m.a,{children:e.startDateTime}),Object(o.jsx)(m.a,{children:e.endDateTime}),Object(o.jsx)(m.a,{children:e.origin}),Object(o.jsx)(m.a,{children:e.destination}),Object(o.jsx)(m.a,{children:e.POC}),Object(o.jsx)(m.a,{children:e.POCPhone}),Object(o.jsx)(m.a,{children:e.vehicles}),Object(o.jsx)(m.a,{children:e.notes})]},e.internalUID)},me=function(e,t,n,a){return Object(o.jsx)(C.a,{onClick:function(){ge(e,t),a(1/0)},children:Object(o.jsx)(m.a,{style:xe(e.latest),align:"center",children:e.title})},n)},xe=function(e){return!1===e?{color:"grey"}:{}},ge=function(e,t){var n;n=[G,t],(F=Object(f.a)(F)).push(n),a(F),G++},ye=function(e){var t=e.data,n=e.generator,a=(e.style,e.header),r=e.tail;return Object(o.jsx)(w.a,{children:Object(o.jsxs)(S.a,{stickyHeader:!0,children:[a,Object(o.jsx)(T.a,{children:t.map(n)}),r]})})},De=function(e){var t=[];return[function(e){return t.push(e)-1},function(e){e>-1&&e<t.length&&(t[e]=function(){})},function(){var n,a=Object(d.a)(t);try{for(a.s();!(n=a.n()).done;){(0,n.value)(e())}}catch(r){a.e(r)}finally{a.f()}}]},ke=[],Ce=function(){return we},we=[],Se=["Pending","Submitted","Recommended","Hidden"],Te=[{name:"name",initialData:"",friendlyName:"Purpose"},{name:"startDateTime",initialData:"",friendlyName:"Start time",fieldType:"datetime"},{name:"endDateTime",initialData:"",friendlyName:"End time",fieldType:"datetime"},{name:"origin",initialData:"",friendlyName:"Reporting location"},{name:"destination",initialData:"",friendlyName:"Destination"},{name:"POC",initialData:"",friendlyName:"Contact person"},{name:"POCPhone",initialData:"",friendlyName:"Contact person number"},{name:"vehicles",initialData:"",friendlyName:"Vehicles"},{name:"notes",initialData:"",friendlyName:"Notes"}],Pe=[{name:"status",initialData:"Pending",friendlyName:"Status"}],Re=[].concat(Te,Pe),Ie=function(e){var t=e.children,n=e.selTab,a=e.setSelTab,r=e.appbarRef,i=[Object(o.jsx)(P.a,{style:{opacity:1,minWidth:0,minHeight:0,padding:0},disableRipple:!0,selected:!0,label:Object(o.jsx)("div",{style:{height:"48px",width:"48px"},children:Object(o.jsx)("img",{src:L,height:"48px",width:"48px"})})})];return Object(o.jsxs)("div",{children:[Object(o.jsx)(R.a,{position:"sticky",style:{top:"env(safe-area-inset-top)"},ref:r,children:Object(o.jsx)(I.a,{variant:"scrollable",value:Math.min(n,t.length-1)+i.length,children:[].concat(i,Object(f.a)(t.map((function(e,r){var i=Object(u.a)(Object(u.a)({},e.props),{},{removeCallback:function(){return e.props.removeCallback(r,t.length)},onClick:function(){a(r)},active:r===Math.min(n,t.length-1),key:e.props.mykey});return Object(o.jsx)(Ne,Object(u.a)({},i))}))))})}),Object(o.jsx)("div",{children:t[Math.min(n,t.length-1)]})]})},Ne=function(e){var t=e.label,n=e.onClick,a=e.active,r=e.removable,i=e.removeCallback;return Object(o.jsx)(P.a,{style:{padding:0},disableRipple:!0,selected:!0,label:Object(o.jsxs)("span",{children:[Object(o.jsx)(P.a,{label:t,onClick:n,selected:!!a||null}),r?Object(o.jsx)(N.a,{size:"small",onClick:i,children:Object(o.jsx)(U.a,{style:{fill:"red"}})}):void 0]})})},Ue=De(ie),Me=Object(j.a)(Ue,3),Ee=Me[0],Le=Me[1],qe=Me[2],He=De(Ce),We=Object(j.a)(He,3),Ae=We[0],ze=We[1],Be=We[2];h.render(Object(o.jsx)("div",{style:{textAlign:"center"},children:Object(o.jsx)(K,{})}),document.getElementById("root"))}},[[261,1,2]]]);
//# sourceMappingURL=main.e040ef3d.chunk.js.map