(this["webpackJsonpindent-system"]=this["webpackJsonpindent-system"]||[]).push([[0],{258:function(e,t){e.exports={makeRanker:function(e){var t=0,n={},r=[];return function(a){a=a.trim().toLowerCase().split(/\b\s+/);t||(!function(e,t,n){for(var r=0;r<e.length;r++){for(var a=Object.values(e[r]).map((function(e){return e.toString().trim().toLowerCase().split(/\b\s+/)})).flat(),i={},c=0;c<a.length;c++)i[a[c]]||(n[a[c]]||(n[a[c]]=0),n[a[c]]++,i[a[c]]=0),i[a[c]]+=1/a.length;t.push(i)}var s=Object.keys(n);for(r=0;r<s.length;r++)n[s[r]]?n[s[r]]=Math.log(e.length/n[s[r]]):n[s[r]]=0}(e,r,n),t=1);for(var i=[],c=0;c<e.length;c++)i.push([0,0,c,e[c]]);for(c=0;c<a.length;c++)for(var s=a[c],u=0;u<e.length;u++)r[u][s]&&(i[u][0]-=r[u][s]*n[s],i[u][1]-=r[u][s]);return i=i.sort((function(e,t){for(var n=0;e[n]===t[n];)n++;return e[n]-t[n]})).map((function(e){return e[3]}))}}}},260:function(e,t,n){"use strict";n.r(t);var r=n(175),a=n(42),i=n.n(a),c=n(79),s=n(38),u=n(10),l=n(88),o=n(19),d=n(56),f=n(0),j=n(18),b=n(164),h=n.n(b),p=n(126),O=n(306),v=n(315),m=n(307),x=n(318),g=n(321),y=n(311),D=n(308),k=n(303),w=n(312),C=n(304),S=n(305),T=n(310),R=n(313),P=n(316),I=n(160),E=n(314),N=n(165),L=n.n(N),M=n.p+"static/media/logo.58ed9303.jpg",U=n.p+"static/media/5sirlogo.a6ac04db.jpg",q=n(22),A=n(67),W=n(107),H=n.n(W),B=n(174),z=n.n(B);console.log("0.1.10a");var F,J,V=n(258),Y="https://murmuring-ocean-38436.herokuapp.com/",K=[],G=0,Q=function(){var e=f.useState([]),t=Object(o.a)(e,2),n=t[0],r=t[1];F=r,f.useEffect((function(){return(J=h()(Y,{secure:!0})).on("sendIndents",(function(e,t){if(void 0!==t){if(t<te)return;te=t,void 0!==re[t]&&re[t]()}Ce=Object(d.a)(e).reverse(),We()})),J.on("sendNotifications",(function(e){Te=Object(d.a)(e).reverse(),Je()})),J.emit("requestIndents",""),J.emit("requestNotifications",""),function(){J.disconnect()}}),[]);var a=f.useState(0),i=Object(o.a)(a,2),c=i[0],s=i[1],j=f.useRef(null),b=f.useRef([]),p=f.useRef(0);return f.useEffect((function(){if(j.current){p.current=j.current.offsetHeight;var e,t=Object(l.a)(b.current);try{for(t.s();!(e=t.n()).done;){(0,e.value)(j.current.offsetHeight)}}catch(n){t.e(n)}finally{t.f()}}}),[j]),Object(u.jsxs)("div",{children:[Object(u.jsx)(Ne,{selTab:c,setSelTab:s,appbarRef:j,children:[Object(u.jsx)("div",{label:"view indents",mykey:"defaultTab1",children:Object(u.jsx)(be,{setSelTab:s,heightProvider:[p,b]})},"defaultTab1"),Object(u.jsx)("div",{label:"new indent",mykey:"defaultTab2",children:Object(u.jsx)(fe,{})},"defaultTab2"),Object(u.jsx)("div",{label:"notifications",mykey:"defaultTab3",children:Object(u.jsx)(X,{setSelTab:s})},"defaultTab3")].concat(Object(d.a)(n.map((function(e,t){return Object(u.jsx)($,{mykey:e[0],label:ee(e[1]).name,removable:"true",removeCallback:function(t,n){var r;r=e[0],K=Object(d.a)(K).filter((function(e){return e[0]!==r})),Z[r]=void 0,F(K);var a=Math.min(c,n-1);a>t&&s(a-1)},details:e,heightProvider:[p,b]},e[0])}))))}),Object(u.jsx)("div",{style:{height:"12px"}}),Object(u.jsx)("img",{src:U,width:"192px"})]})},X=function(e){var t=e.setSelTab,n=Se(),r=f.useState(n),a=Object(o.a)(r,2),i=(a[0],a[1]);f.useEffect((function(){var e=ze(i);return function(){return Fe(e)}}),[]);for(var c=[],l={},d=0;d<n.length;d++)!0===l[n[d].internalUID]?c.push(Object(s.a)(Object(s.a)({},n[d]),{},{latest:!1})):c.push(Object(s.a)(Object(s.a)({},n[d]),{},{latest:!0})),l[n[d].internalUID]=!0;return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{height:"12px"}}),Object(u.jsx)(p.a,{square:!0,children:Object(u.jsx)(ke,{data:c,generator:function(e,n){return ge(e,e.internalUID,""+e.internalUID+n,t)},style:ve})})]})},Z={},$=function(e){var t=e.details,n=e.heightProvider,r=Object(o.a)(t,2),a=r[0],i=r[1];void 0===Z[a]&&(Z[a]=ee(i));var c=f.useState(Z[a]),l=Object(o.a)(c,2),d=l[0],j=l[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{height:"12px"}}),Object(u.jsx)(p.a,{square:!0,children:Object(u.jsx)(ke,{header:Object(u.jsx)(Oe,{heightProvider:n,children:Pe.map((function(e,t){return Object(u.jsx)(O.a,{children:e.friendlyName},t)}))}),data:[d],generator:function(e){return xe(e,e.internalUID)},style:ve})}),Object(u.jsx)("div",{style:{height:"12px"}}),Object(u.jsx)(v.a,{variant:"outlined",native:!0,value:d.status,onChange:function(e){Z[a]=Object(s.a)(Object(s.a)({},Z[a]),{},{status:e.target.value}),j(Z[a])},children:Re.map((function(e,t){return Object(u.jsx)("option",{value:e,children:e},t)}))}),Object(u.jsx)(m.a,{variant:"outlined",onClick:function(){_(i,Z[a])},children:"Save"})]})},_=function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(t,n);case 2:e.sent&&We();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(e){var t=Ce.filter((function(t){return t.internalUID===e}));return 0===t.length?void 0:t[0]},te=0,ne=0,re=[],ae=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne++,a=new Promise((function(e){return r=e})),re[ne]=r,J.emit("writeDataStore",[t,n,ne]),e.next=6,a;case 6:if(ne!==te){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ie=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne++,r=new Promise((function(e){return n=e})),re[ne]=n,J.emit("appendDataStore",[t,ne]),e.next=6,r;case 6:if(ne!==te){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){return Ce},se=function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e){return e.slice(6,10)+"-"+e.slice(3,5)+"-"+e.slice(0,2)+"T"+e.slice(11,16)},!(Math.min(Math.min(new Date(n(t.startDateTime)))||1/0,Math.min(new Date(n(t.endDateTime)))||1/0)-new Date<14688e5)){e.next=4;break}return e.abrupt("return","FAILED");case 4:return e.next=6,ie(t);case 6:if(!e.sent){e.next=10;break}return We(),e.abrupt("return","SUCCESS");case 10:return e.abrupt("return","UNKNOWN");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(e){var t=e.fields,n=e.defaults,r=e.formPersistentStore,a=[],s=void 0===r?{}:r;void 0===s.data&&(s.data=t.map((function(e){return e.initialData})));for(var j=f.useState(s.data),b=Object(o.a)(j,2),h=b[0],p=b[1],O=h,v=function(){var e=g,n=t[e];a.push([h[e],function(t){(O=Object(d.a)(O))[e]=t,s.data=O,p(O)},n.initialData,n.name,n.friendlyName,n.fieldType])},g=0;g<t.length;g++)v();var y=function(){var e=t.map((function(e){return e.initialData}));s.data=e,p(e)},D=function(){var e=Object(c.a)(i.a.mark((function e(){var t,r,c,s,u,d,f,j,b,h,p,O,v,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={},r=Object(l.a)(n);try{for(r.s();!(c=r.n()).done;)s=c.value,u=s.name,d=s.initialData,t[u]=d}catch(i){r.e(i)}finally{r.f()}f=Object(l.a)(a);try{for(f.s();!(j=f.n()).done;)b=Object(o.a)(j.value,6),h=b[0],b[1],b[2],p=b[3],b[4],O=b[5],v=le[O],t[p]=v?v(h):h}catch(i){f.e(i)}finally{f.f()}return e.next=7,se(t);case 7:"SUCCESS"===(m=e.sent)?(alert("Indent submitted successfully!"),y()):"FAILED"===m&&alert("This indent is too late. Please discuss this indent manually with the transport clerk.");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("form",{noValidate:!0,children:[Object(u.jsx)("div",{children:a.map((function(e,t){var n=Object(o.a)(e,6),r=n[0],a=n[1],i=(n[2],n[3],n[4]),c=n[5];return Object(u.jsx)("div",{style:oe,children:"datetime"===c?Object(u.jsx)(x.a,{id:"datetime-local",fullWidth:!0,label:i,type:"datetime-local",variant:"outlined",onChange:function(e){return a(e.target.value)},InputLabelProps:{shrink:!0},style:{maxWidth:"1000px"}}):Object(u.jsx)(x.a,{fullWidth:!0,multiline:!0,label:i,variant:"outlined",value:r,onChange:function(e){return a(e.target.value)},InputLabelProps:{shrink:!0},style:{maxWidth:"1000px"}})},t)}))}),Object(u.jsx)(m.a,{variant:"outlined",onClick:D,children:"submit"})]})},le={datetime:function(e){try{if(e.length>0)return e.slice(8,10)+"/"+e.slice(5,7)+"/"+e.slice(0,4)+" "+e.slice(11,16)}catch(t){}return e}},oe={display:"flex",justifyContent:"center",paddingLeft:"12px",paddingRight:"12px",paddingTop:"5px",paddingBottom:"7px"},de={},fe=function(){return Object(u.jsxs)("div",{style:ve,children:[Object(u.jsx)("div",{style:{height:"12px"}}),Object(u.jsx)(ue,{fields:Pe,defaults:Ie,formPersistentStore:de})]})},je={},be=function(e){var t=e.setSelTab,n=e.heightProvider;!0!==je.initialized&&(je.initialized=!0,je.data="",je.sort=null,je.up=!0,je.view="list",je.selDate=(new Date).toISOString().slice(0,10));var a=ce();f.useEffect((function(){var e=qe((function(e){h.current=e,m.current=V.makeRanker(e),w(""!==x.current?m.current(x.current):e)}));return function(){return Ae(e)}}),[]);var i=f.useState(je.data),c=Object(o.a)(i,2),l=c[0],j=c[1],b=f.useRef(null),h=f.useRef(a),v=V.makeRanker(a),m=f.useRef(v),x=f.useRef(je.data),y=f.useState(""!==je.data?v(je.data):a),D=Object(o.a)(y,2),k=D[0],w=D[1],C=function(e){je.data=e,j(e),je.view="list",Y("list"),je.sort=null,I(null),je.up=!0,U(!0),null!==b.current&&(clearTimeout(b.current),b.current=null),b.current=setTimeout((function(){x.current=e,w(""!==e?m.current(e):h.current),b.current=null}),100)},S=f.useRef(null),T=f.useState(je.sort),R=Object(o.a)(T,2),P=R[0],I=R[1],E=f.useState(je.up),N=Object(o.a)(E,2),M=N[0],U=N[1],W=f.useMemo((function(){return k.filter((function(e){return"Hidden"!==e.status}))}),[k]),H=f.useMemo((function(){return null===P?W:W.map((function(e,t){return[e,t]})).sort((function(e,t){var n=Object(o.a)(e,2),r=n[0],a=n[1],i=Object(o.a)(t,2),c=i[0],s=i[1],u=r[P],l=c[P];if(typeof u===typeof l&&u!==l){if("string"===typeof u){for(var d=0;d<Math.min(u.length,l.length);d++){var f=u.charCodeAt(d),j=l.charCodeAt(d);if(f!==j)return f-j}return u.length-l.length}if("number"===typeof u)return u-l}return a-s})).map((function(e){var t=Object(o.a)(e,2),n=t[0];t[1];return n}))}),[W,P]),B=f.useMemo((function(){return!0===M?H:Object(d.a)(H).reverse()}),[H,M]),z=f.useState(je.view),F=Object(o.a)(z,2),J=F[0],Y=F[1],K=f.useState(je.selDate),G=Object(o.a)(K,2),Q=G[0],X=G[1],Z=f.useMemo((function(){return function(e){return function(t){var n=t.children,a=Object(r.a)(t,["children"]);return Object(u.jsx)(A.a.Appointment,Object(s.a)(Object(s.a)({},a),{},{onClick:function(t){De(void 0,t.data.internalUID),e(1/0)},children:n}))}}(t)}),[t]);return f.useEffect((function(){null!==S.current&&S.current.addEventListener("keyup",(function(e){13!==e.charCode&&"Enter"!==e.key||e.stopPropagation()}),{capture:!0})}),[S]),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{height:"12px"}}),Object(u.jsx)("div",{style:{marginLeft:"12px",marginRight:"12px"},children:Object(u.jsx)("div",{ref:S,children:Object(u.jsx)(L.a,{value:l,onChange:C,onCancelSearch:function(){return C("")},onRequestSearch:function(){"list"===J?(je.view="calendar",Y("calendar")):(je.view="list",Y("list"))},style:{margin:"auto",maxWidth:"1000px"},searchIcon:Object(u.jsx)(pe,{icon:J})})})}),Object(u.jsx)("div",{style:{height:"12px"}}),Object(u.jsx)(p.a,{square:!0,children:"list"===J?Object(u.jsx)(ke,{header:Object(u.jsx)(Oe,{heightProvider:n,children:Ee.map((function(e,t){return Object(u.jsx)(O.a,{children:Object(u.jsx)(g.a,{active:P===e.name,direction:P===e.name&&!1===M?"desc":"asc",onClick:function(){return function(e){je.data="",j("");var t=e===P?!1===M&&(je.sort=null,I(null),!0):(je.sort=e,I(e),!0);je.up=t,U(t)}(e.name)},children:e.friendlyName})},t)}))}),data:B,generator:function(e){return me(e,e.internalUID,t)},style:ve}):Object(u.jsxs)(A.d,{data:W.map((function(e){var t=function(e){return e.slice(6,10)+"-"+e.slice(3,5)+"-"+e.slice(0,2)+"T"+e.slice(11,16)};return{startDate:t(e.startDateTime),endDate:t(e.endDateTime),title:e.name,internalUID:e.internalUID}})),children:[Object(u.jsx)(q.q,{defaultCurrentDate:Q,onCurrentDateChange:function(e){je.selDate=e,X(e)}}),Object(u.jsx)(A.c,{}),Object(u.jsx)(A.a,{appointmentComponent:Z}),Object(u.jsx)(A.e,{}),Object(u.jsx)(A.b,{})]})})]})},he="all ".concat(.075,"s linear"),pe=function(e){var t=e.icon,n=f.useRef(!0),r=f.useRef(t),a=f.useState(t),i=Object(o.a)(a,2),c=i[0],s=i[1],l=f.useRef(null),d=f.useRef(null),j=f.useRef(null);return f.useEffect((function(){j.current=function(e,t){var n=function(){0===e.current.getBoundingClientRect().width&&t()};return e.current.addEventListener("transitionend",n),e.current.addEventListener("transitioncancel",n),function(n){"expand"===n?(e.current.classList.remove("collapsed"),e.current.classList.add("expanded")):"collapse"===n&&(e.current.classList.remove("expanded"),e.current.classList.add("collapsed"),0===e.current.getBoundingClientRect().width&&t())}}(l,(function(){if(null!==d.current){var e=d.current;d.current=null,r.current=e,s(e),j.current("expand")}}))}),[l]),f.useEffect((function(){if(!0!==n.current){if(r.current===t)return d.current=null,void j.current("expand");d.current=t,j.current("collapse")}else n.current=!1}),[t]),Object(u.jsx)(y.a,{ref:l,style:{transition:he},children:"list"===c?Object(u.jsx)(H.a,{}):Object(u.jsx)(z.a,{})})},Oe=function(e){var t=e.children,n=Object(o.a)(e.heightProvider,2),r=n[0],a=n[1],i=f.useRef(null);f.useEffect((function(){var e=a.current,t=r.current,n=i.current.getBoundingClientRect().top+window.scrollY,c=function(){var e=Math.max(window.scrollY+t-n,0);d(e)};c();var s=e.push((function(e){t=e,c()}))-1;return window.addEventListener("scroll",c),function(){e[s]=function(){},window.removeEventListener("scroll",c)}}),[r,a]);var c=f.useState(0),s=Object(o.a)(c,2),l=s[0],d=s[1];return Object(u.jsx)(D.a,{children:Object(u.jsx)(k.a,{ref:i,style:{transform:"translate(0,"+l+"px)"},children:t})})},ve={font:"20px Arial, sans-serif"},me=function(e,t,n){var r=function(e){return e.slice(6,10)+"-"+e.slice(3,5)+"-"+e.slice(0,2)+"T"+e.slice(11,16)},a="white";if("Recommended"===e.status)a="rgb(230, 255, 230)";else{var i=Math.min(Math.min(new Date(r(e.startDateTime)))||1/0,Math.min(new Date(r(e.endDateTime)))||1/0)-new Date;i<14688e5?a="rgb(255, 230, 230)":i<18144e5&&(a="rgb(255, 255, 204)")}return Object(u.jsxs)(k.a,{style:{backgroundColor:a},onClick:function(){De(e,t),n(1/0)},children:[Object(u.jsx)(O.a,{children:e.name}),Object(u.jsx)(O.a,{children:e.startDateTime}),Object(u.jsx)(O.a,{children:e.endDateTime}),Object(u.jsx)(O.a,{children:e.origin}),Object(u.jsx)(O.a,{children:e.destination}),Object(u.jsx)(O.a,{children:e.POC}),Object(u.jsx)(O.a,{children:e.POCPhone}),Object(u.jsx)(O.a,{children:e.vehicles}),Object(u.jsx)(O.a,{children:e.notes}),Object(u.jsx)(O.a,{children:e.status})]},e.internalUID)},xe=function(e,t){return Object(u.jsxs)(k.a,{children:[Object(u.jsx)(O.a,{children:e.name}),Object(u.jsx)(O.a,{children:e.startDateTime}),Object(u.jsx)(O.a,{children:e.endDateTime}),Object(u.jsx)(O.a,{children:e.origin}),Object(u.jsx)(O.a,{children:e.destination}),Object(u.jsx)(O.a,{children:e.POC}),Object(u.jsx)(O.a,{children:e.POCPhone}),Object(u.jsx)(O.a,{children:e.vehicles}),Object(u.jsx)(O.a,{children:e.notes})]},e.internalUID)},ge=function(e,t,n,r){return Object(u.jsx)(k.a,{onClick:function(){De(e,t),r(1/0)},children:Object(u.jsx)(O.a,{style:ye(e.latest),align:"center",children:e.title})},n)},ye=function(e){return!1===e?{color:"grey"}:{}},De=function(e,t){var n;n=[G,t],(K=Object(d.a)(K)).push(n),F(K),G++},ke=function(e){var t=e.data,n=e.generator,r=(e.style,e.header),a=e.tail;return Object(u.jsx)(w.a,{children:Object(u.jsxs)(C.a,{stickyHeader:!0,children:[r,Object(u.jsx)(S.a,{children:t.map(n)}),a]})})},we=function(e){var t=[];return[function(e){return t.push(e)-1},function(e){e>-1&&e<t.length&&(t[e]=function(){})},function(){var n,r=Object(l.a)(t);try{for(r.s();!(n=r.n()).done;){(0,n.value)(e())}}catch(a){r.e(a)}finally{r.f()}}]},Ce=[],Se=function(){return Te},Te=[],Re=["Pending","Submitted","Recommended","Hidden"],Pe=[{name:"name",initialData:"",friendlyName:"Purpose"},{name:"startDateTime",initialData:"",friendlyName:"Start time",fieldType:"datetime"},{name:"endDateTime",initialData:"",friendlyName:"End time",fieldType:"datetime"},{name:"origin",initialData:"",friendlyName:"Reporting location"},{name:"destination",initialData:"",friendlyName:"Destination"},{name:"POC",initialData:"",friendlyName:"Contact person"},{name:"POCPhone",initialData:"",friendlyName:"Contact person number"},{name:"vehicles",initialData:"",friendlyName:"Vehicles"},{name:"notes",initialData:"",friendlyName:"Notes"}],Ie=[{name:"status",initialData:"Pending",friendlyName:"Status"}],Ee=[].concat(Pe,Ie),Ne=function(e){var t=e.children,n=e.selTab,r=e.setSelTab,a=e.appbarRef,i=[Object(u.jsx)(T.a,{style:{opacity:1,minWidth:0,minHeight:0,padding:0},disableRipple:!0,selected:!0,label:Object(u.jsx)("div",{style:{height:"48px",width:"48px"},children:Object(u.jsx)("img",{src:M,height:"48px",width:"48px"})})})];return Object(u.jsxs)("div",{children:[Object(u.jsx)(R.a,{position:"sticky",style:{top:"env(safe-area-inset-top)"},ref:a,children:Object(u.jsx)(P.a,{variant:"scrollable",value:Math.min(n,t.length-1)+i.length,children:[].concat(i,Object(d.a)(t.map((function(e,a){var i=Object(s.a)(Object(s.a)({},e.props),{},{removeCallback:function(){return e.props.removeCallback(a,t.length)},onClick:function(){r(a)},active:a===Math.min(n,t.length-1),key:e.props.mykey});return Object(u.jsx)(Le,Object(s.a)({},i))}))))})}),Object(u.jsx)("div",{children:t[Math.min(n,t.length-1)]})]})},Le=function(e){var t=e.label,n=e.onClick,r=e.active,a=e.removable,i=e.removeCallback;return Object(u.jsx)(T.a,{style:{padding:0},disableRipple:!0,selected:!0,label:Object(u.jsxs)("span",{children:[Object(u.jsx)(T.a,{label:t,onClick:n,selected:!!r||null}),a?Object(u.jsx)(I.a,{size:"small",onClick:i,children:Object(u.jsx)(E.a,{style:{fill:"red"}})}):void 0]})})},Me=we(ce),Ue=Object(o.a)(Me,3),qe=Ue[0],Ae=Ue[1],We=Ue[2],He=we(Se),Be=Object(o.a)(He,3),ze=Be[0],Fe=Be[1],Je=Be[2];j.render(Object(u.jsx)("div",{style:{textAlign:"center"},children:Object(u.jsx)(Q,{})}),document.getElementById("root"))}},[[260,1,2]]]);
//# sourceMappingURL=main.dd23fbc2.chunk.js.map