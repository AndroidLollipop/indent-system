(this["webpackJsonpindent-system"]=this["webpackJsonpindent-system"]||[]).push([[0],{203:function(e,t){e.exports={makeRanker:function(e){var t=0,n={},a=[];return function(r){r=r.toLowerCase().split(/\b\s+/);t||(!function(e,t,n){for(var a=0;a<e.length;a++){for(var r=Object.values(e[a]).map((function(e){return e.toString().split(/\b\s+/)})).flat(),i={},c=0;c<r.length;c++)i[r[c]]||(n[r[c]]||(n[r[c]]=0),n[r[c]]++,i[r[c]]=0),i[r[c]]+=1/r.length;t.push(i)}var s=Object.keys(n);for(a=0;a<s.length;a++)n[s[a]]?n[s[a]]=Math.log(e.length/n[s[a]]):n[s[a]]=0}(e,a,n),t=1);for(var i=[],c=0;c<e.length;c++)i.push([0,0,c,e[c]]);for(c=0;c<r.length;c++){var s=r[c];console.log(s);for(var l=0;l<e.length;l++)a[l][s]&&(console.log(a[l][s]),console.log(n[s]),i[l][0]-=a[l][s]*n[s],i[l][1]-=a[l][s])}return i=i.sort((function(e,t){for(var n=0;e[n]===t[n];)n++;return e[n]-t[n]})).map((function(e){return e[3]}))}}}},205:function(e,t,n){"use strict";n.r(t);var a,r,i=n(81),c=n(31),s=n.n(c),l=n(63),u=n(23),o=n(3),j=n(16),d=n(39),b=n(0),f=n(10),h=n(122),O=n.n(h),v=n(93),x=n(231),m=n(232),p=n(233),y=n(242),g=n(235),k=n(244),D=n(236),C=n(237),T=n(238),S=n(239),w=n(240),P=n(243),N=n(116),I=n(241),R=n(123),U=n.n(R),q=n.p+"static/media/logo.58ed9303.jpg",E=n.p+"static/media/5sirlogo.a6ac04db.jpg",M=n(203),L="https://murmuring-ocean-38436.herokuapp.com/",W=[],A=0,J=function(){var e=b.useState([]),t=Object(j.a)(e,2),n=t[0],i=t[1];a=i,b.useEffect((function(){return(r=O()(L,{secure:!0})).on("sendIndents",(function(e,t){if(void 0!==t){if(t<G)return;G=t,void 0!==Q[t]&&Q[t]()}be=Object(d.a)(e).reverse(),Te()})),r.on("sendNotifications",(function(e){he=Object(d.a)(e).reverse(),Ie()})),r.emit("requestIndents",""),r.emit("requestNotifications",""),function(){r.disconnect()}}),[]);var c=b.useState(0),s=Object(j.a)(c,2),l=s[0],u=s[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)(pe,{selTab:l,setSelTab:u,children:[Object(o.jsx)("div",{label:"view indents",mykey:"defaultTab1",children:Object(o.jsx)(re,{setSelTab:u})},"defaultTab1"),Object(o.jsx)("div",{label:"new indent",mykey:"defaultTab2",children:Object(o.jsx)(ae,{})},"defaultTab2"),Object(o.jsx)("div",{label:"notifications",mykey:"defaultTab3",children:Object(o.jsx)(V,{setSelTab:u})},"defaultTab3")].concat(Object(d.a)(n.map((function(e,t){return Object(o.jsx)(B,{mykey:e[0],label:F(e[1]).name,removable:"true",removeCallback:function(t,n){var r;r=e[0],W=Object(d.a)(W).filter((function(e){return e[0]!==r})),z[r]=void 0,a(W);var i=Math.min(l,n-1);i>t&&u(i-1)},details:e},e[0])}))))}),Object(o.jsx)("div",{style:{height:"6px"}}),Object(o.jsx)("img",{src:E,width:"192px"})]})},V=function(e){var t=e.setSelTab,n=fe(),a=b.useState(n),r=Object(j.a)(a,2),i=(r[0],r[1]);b.useEffect((function(){var e=Pe(i);return function(){return Ne(e)}}),[]);for(var c=[],s={},l=0;l<n.length;l++)!0===s[n[l].internalUID]?c.push(Object(u.a)(Object(u.a)({},n[l]),{},{latest:!1})):c.push(Object(u.a)(Object(u.a)({},n[l]),{},{latest:!0})),s[n[l].internalUID]=!0;return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{style:{height:"6px"}}),Object(o.jsx)(v.a,{square:!0,children:Object(o.jsx)(je,{data:c,generator:function(e,n){return le(e,e.internalUID,""+e.internalUID+n,t)},style:ie})})]})},z={},B=function(e){var t=e.details,n=Object(j.a)(t,2),a=n[0],r=n[1];void 0===z[a]&&(z[a]=F(r));var i=b.useState(z[a]),c=Object(j.a)(i,2),s=c[0],l=c[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{style:{height:"6px"}}),Object(o.jsx)(v.a,{square:!0,children:Object(o.jsx)(je,{header:Object(o.jsx)(x.a,{children:Object(o.jsx)(m.a,{children:ve.map((function(e,t){return Object(o.jsx)(p.a,{children:e.friendlyName},t)}))})}),data:[s],generator:function(e){return se(e,e.internalUID)},style:ie})}),Object(o.jsx)("div",{style:{height:"6px"}}),Object(o.jsx)(y.a,{variant:"outlined",native:!0,value:s.status,onChange:function(e){z[a]=Object(u.a)(Object(u.a)({},z[a]),{},{status:e.target.value}),l(z[a])},children:Oe.map((function(e,t){return Object(o.jsx)("option",{value:e,children:e},t)}))}),Object(o.jsx)(g.a,{variant:"outlined",onClick:function(){H(r,z[a])},children:"Save"})]})},H=function(){var e=Object(l.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t,n);case 2:e.sent&&Te();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(e){var t=be.filter((function(t){return t.internalUID===e}));return 0===t.length?void 0:t[0]},G=0,K=0,Q=[],X=function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K++,i=new Promise((function(e){return a=e})),Q[K]=a,r.emit("writeDataStore",[t,n,K]),e.next=6,i;case 6:if(K!==G){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K++,a=new Promise((function(e){return n=e})),Q[K]=n,r.emit("appendDataStore",[t,K]),e.next=6,a;case 6:if(K!==G){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){return be},$=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(t);case 2:e.sent&&Te();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e){var t=e.fields,n=e.defaults,a=e.formPersistentStore,r=[],c=void 0===a?{}:a;void 0===c.data&&(c.data=t.map((function(e){return e.initialData})));for(var s=b.useState(c.data),l=Object(j.a)(s,2),u=l[0],f=l[1],h=u,O=function(){var e=v,n=t[e];r.push([u[e],function(t){(h=Object(d.a)(h))[e]=t,c.data=h,f(h)},n.initialData,n.name,n.friendlyName,n.fieldType])},v=0;v<t.length;v++)O();return Object(o.jsxs)("form",{noValidate:!0,children:[Object(o.jsx)("div",{children:r.map((function(e,t){var n=Object(j.a)(e,6),a=n[0],r=n[1],i=(n[2],n[3],n[4]),c=n[5];return Object(o.jsx)("div",{style:te,children:"datetime"===c?Object(o.jsx)(k.a,{id:"datetime-local",fullWidth:!0,label:i,type:"datetime-local",variant:"outlined",onChange:function(e){return r(e.target.value)},InputLabelProps:{shrink:!0}}):Object(o.jsx)(k.a,{fullWidth:!0,multiline:!0,label:i,variant:"outlined",value:a,onChange:function(e){return r(e.target.value)},InputLabelProps:{shrink:!0}})},t)}))}),Object(o.jsx)(g.a,{variant:"outlined",onClick:function(){var e,a={},s=Object(i.a)(n);try{for(s.s();!(e=s.n()).done;){var l=e.value,u=l.name,o=l.initialData;a[u]=o}}catch(p){s.e(p)}finally{s.f()}var d,b=Object(i.a)(r);try{for(b.s();!(d=b.n()).done;){var h=Object(j.a)(d.value,6),O=h[0],v=(h[1],h[2],h[3]),x=(h[4],h[5]),m=ee[x];a[v]=m?m(O):O}}catch(p){b.e(p)}finally{b.f()}$(a),function(){var e=t.map((function(e){return e.initialData}));c.data=e,f(e)}()},children:"submit"})]})},ee={datetime:function(e){try{if(e.length>0)return e.slice(8,10)+"/"+e.slice(5,7)+"/"+e.slice(0,4)+" "+e.slice(11,16)}catch(t){}return e}},te={display:"flex",justifyContent:"center",padding:"5px"},ne={},ae=function(){return Object(o.jsxs)("div",{style:ie,children:[Object(o.jsx)("div",{style:{height:"6px"}}),Object(o.jsx)(_,{fields:ve,defaults:xe,formPersistentStore:ne})]})},re=function(e){var t=e.setSelTab,n=Z(),a=b.useState(n),r=Object(j.a)(a,2),i=r[0],c=r[1];b.useEffect((function(){var e=De((function(e){h.current=e,O.current=M.makeRanker(e),c(""!==y.current?O.current(y.current):e)}));return function(){return Ce(e)}}),[]);var s=b.useState(""),l=Object(j.a)(s,2),u=l[0],d=l[1],f=b.useRef(null),h=b.useRef(n),O=b.useRef(M.makeRanker(n)),y=b.useRef(""),g=function(e){d(e),null!==f.current&&(clearTimeout(f.current),f.current=null),f.current=setTimeout((function(){y.current=e,c(""!==e?O.current(e):h.current),f.current=null}),100)};return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{style:{height:"12px"}}),Object(o.jsx)(U.a,{value:u,onChange:g,onCancelSearch:function(){return g("")},onRequestSearch:function(){},style:{width:"90%",margin:"auto"}}),Object(o.jsx)("div",{style:{height:"6px"}}),Object(o.jsx)(v.a,{square:!0,children:Object(o.jsx)(je,{header:Object(o.jsx)(x.a,{children:Object(o.jsx)(m.a,{children:me.map((function(e,t){return Object(o.jsx)(p.a,{children:e.friendlyName},t)}))})}),data:i,generator:function(e){return ce(e,e.internalUID,t)},style:ie})})]})},ie={font:"20px Arial, sans-serif"},ce=function(e,t,n){return Object(o.jsxs)(m.a,{onClick:function(){oe(e,t),n(1/0)},children:[Object(o.jsx)(p.a,{children:e.name}),Object(o.jsx)(p.a,{children:e.startDateTime}),Object(o.jsx)(p.a,{children:e.endDateTime}),Object(o.jsx)(p.a,{children:e.origin}),Object(o.jsx)(p.a,{children:e.destination}),Object(o.jsx)(p.a,{children:e.POC}),Object(o.jsx)(p.a,{children:e.POCPhone}),Object(o.jsx)(p.a,{children:e.vehicles}),Object(o.jsx)(p.a,{children:e.notes}),Object(o.jsx)(p.a,{children:e.status})]},e.internalUID)},se=function(e,t){return Object(o.jsxs)(m.a,{children:[Object(o.jsx)(p.a,{children:e.name}),Object(o.jsx)(p.a,{children:e.startDateTime}),Object(o.jsx)(p.a,{children:e.endDateTime}),Object(o.jsx)(p.a,{children:e.origin}),Object(o.jsx)(p.a,{children:e.destination}),Object(o.jsx)(p.a,{children:e.POC}),Object(o.jsx)(p.a,{children:e.POCPhone}),Object(o.jsx)(p.a,{children:e.vehicles}),Object(o.jsx)(p.a,{children:e.notes})]},e.internalUID)},le=function(e,t,n,a){return Object(o.jsx)(m.a,{onClick:function(){oe(e,t),a(1/0)},children:Object(o.jsx)(p.a,{style:ue(e.latest),align:"center",children:e.title})},n)},ue=function(e){return!1===e?{color:"grey"}:{}},oe=function(e,t){var n;n=[A,t],(W=Object(d.a)(W)).push(n),a(W),A++},je=function(e){var t=e.data,n=e.generator,a=(e.style,e.header),r=e.tail;return Object(o.jsx)(D.a,{children:Object(o.jsxs)(C.a,{children:[a,Object(o.jsx)(T.a,{children:t.map(n)}),r]})})},de=function(e){var t=[];return[function(e){return t.push(e)-1},function(e){e>-1&&e<t.length&&(t[e]=function(){})},function(){var n,a=Object(i.a)(t);try{for(a.s();!(n=a.n()).done;){(0,n.value)(e())}}catch(r){a.e(r)}finally{a.f()}}]},be=[],fe=function(){return he},he=[],Oe=["Pending","Submitted","Recommended"],ve=[{name:"name",initialData:"",friendlyName:"Purpose"},{name:"startDateTime",initialData:"",friendlyName:"Start time",fieldType:"datetime"},{name:"endDateTime",initialData:"",friendlyName:"End time",fieldType:"datetime"},{name:"origin",initialData:"",friendlyName:"Reporting location"},{name:"destination",initialData:"",friendlyName:"Destination"},{name:"POC",initialData:"",friendlyName:"Contact person"},{name:"POCPhone",initialData:"",friendlyName:"Contact person number"},{name:"vehicles",initialData:"",friendlyName:"Vehicles"},{name:"notes",initialData:"",friendlyName:"Notes"}],xe=[{name:"status",initialData:"Pending",friendlyName:"Status"}],me=[].concat(ve,xe),pe=function(e){var t=e.children,n=e.selTab,a=e.setSelTab,r=[Object(o.jsx)(S.a,{style:{opacity:1,minWidth:0,minHeight:0,padding:0},disableRipple:!0,selected:!0,label:Object(o.jsx)("div",{style:{height:"48px",width:"48px"},children:Object(o.jsx)("img",{src:q,height:"48px",width:"48px"})})})];return Object(o.jsxs)("div",{children:[Object(o.jsx)(w.a,{position:"sticky",style:{top:"env(safe-area-inset-top)"},children:Object(o.jsx)(P.a,{variant:"scrollable",value:Math.min(n,t.length-1)+r.length,children:[].concat(r,Object(d.a)(t.map((function(e,r){var i=Object(u.a)(Object(u.a)({},e.props),{},{removeCallback:function(){return e.props.removeCallback(r,t.length)},onClick:function(){a(r)},active:r===Math.min(n,t.length-1),key:e.props.mykey});return Object(o.jsx)(ye,Object(u.a)({},i))}))))})}),Object(o.jsx)("div",{children:t[Math.min(n,t.length-1)]})]})},ye=function(e){var t=e.label,n=e.onClick,a=e.active,r=e.removable,i=e.removeCallback;return Object(o.jsx)(S.a,{style:{padding:0},disableRipple:!0,selected:!0,label:Object(o.jsxs)("span",{children:[Object(o.jsx)(S.a,{label:t,onClick:n,selected:!!a||null}),r?Object(o.jsx)(N.a,{size:"small",onClick:i,children:Object(o.jsx)(I.a,{style:{fill:"red"}})}):void 0]})})},ge=de(Z),ke=Object(j.a)(ge,3),De=ke[0],Ce=ke[1],Te=ke[2],Se=de(fe),we=Object(j.a)(Se,3),Pe=we[0],Ne=we[1],Ie=we[2];f.render(Object(o.jsx)("div",{style:{textAlign:"center"},children:Object(o.jsx)(J,{})}),document.getElementById("root"))}},[[205,1,2]]]);
//# sourceMappingURL=main.7bfa11b5.chunk.js.map